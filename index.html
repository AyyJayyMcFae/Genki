<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GENKI - Streetwear Label</title>
  <!-- Load Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Use Inter font family -->
  <link rel="icon" type="image/png" sizes="32x32" href="https://res.cloudinary.com/dzhvdoifb/image/upload/v1770029525/favicon_gfcbmi.png">
  <link rel="shortcut icon" href="https://res.cloudinary.com/dzhvdoifb/image/upload/v1767129720/blueGlitch_sddxpb.png?v=2">
  <link rel="apple-touch-icon" sizes="180x180" href="https://res.cloudinary.com/dzhvdoifb/image/upload/v1767129720/blueGlitch_sddxpb.png?v=2">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHq6O3b+6b0Z9VV8+5v4y5j1l5/1p5Q5K5j5V5Q5K5j5V5Q5K5j5V5Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#0d0d0d">

  <meta property="og:title" content="GENKI – Streetwear Label">
  <meta property="og:description" content="Limited-run streetwear built for real life.">
  <meta property="og:image" content="https://res.cloudinary.com/dzhvdoifb/image/upload/v1770029525/favicon_gfcbmi.png">
  <meta property="og:url" content="https://ayyjayymcfae.github.io/Genki/">
  <meta property="og:type" content="website">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="GENKI – Streetwear Label">
  <meta name="twitter:description" content="Limited-run streetwear built for real life.">
  <meta name="twitter:image" content="  <meta property="og:image" content="https://res.cloudinary.com/dzhvdoifb/image/upload/v1770029525/favicon_gfcbmi.png">
">

  <!---
  <link rel="canonical" href="https://yourdomain.com">
  --->
<script>
 tailwind.config = {
  theme: {
   extend: {
    colors: {
     brand: {
      neon: '#8BFF5B',
      ink: '#0a0a0f',
      fatigue: '#5b4f36',
      dusty: '#e49182',
      navy: '#1a2a4a',
      maroon: '#4a1010',
      charcoal: '#38302a',
      Moss: '#70745b',
     },
    },
   },
  },
 };
</script>


  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Noto+Sans+JP:wght@400;700;900&display=swap');
    body {
      font-family: 'Inter', sans-serif;
      background-color: #0d0d0d; /* Dark background for streetwear aesthetic */
      color: #f7f7f7;
      scroll-behavior: smooth;
      margin: 0; /* remove default body margin so hero sits at the top */
    }
    /* Custom height for the full viewport hero section */
    .hero-height { min-height: 100vh; }
    /* Utility class for routing - initially hidden by default */
    .page-content { display: none; }
    /* Fallback: Show home page if JS fails */
    #home-page { display: block; }

    /* ---- CLEAN HERO ANIMATION (replaces character scramble) ---- */
    #hero-title {
      font-family: 'Inter', 'Noto Sans JP', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif,;
      letter-spacing: .15em;
      text-shadow: 0 4px 40px rgba(255,255,255,.08);
      transition: opacity .6s ease, transform .6s ease;
      will-change: opacity, transform, letter-spacing;
    }
    /* fade/slide out */
    #hero-title.is-out { opacity: 0; transform: translateY(10px); letter-spacing: .25em; }
    /* subtle entrance pop */
    #hero-title.is-in { opacity: 1; transform: translateY(0); letter-spacing: .15em; }

    /* --- Search Bar Visibility Fix --- */
    #search-input-container {
    position: absolute;
    right: calc(100% + 8px);
    top: 50%;
    transform: translateY(-50%);  
    width: 0;
    opacity: 0;
    overflow: hidden;
    pointer-events: none;
    transition: width 0.3s ease-out, opacity 0.3s ease-out;
    display: flex;
    align-items: center;
   }
    #search-input-container.active { width: 280px; opacity: 1; pointer-events: auto; }
    #search-input-container input { padding-right: 40px; }
  /* Cart summary list */
    .cart-line { display: grid; grid-template-columns: 64px 1fr auto; gap: 12px; padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,.06); }
    .qty-btn { width: 28px; height: 28px; border: 1px solid rgba(255,255,255,.2); display:flex; align-items:center; justify-content:center; }
    .price-sm { color: #cfcfcf; }
    @keyframes cart-pulse {
      0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,255,255,.35); }
      70% { transform: scale(1.08); box-shadow: 0 0 0 12px rgba(255,255,255,0); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,255,255,0); }
    }
    .cart-attention { animation: cart-pulse .7s ease-out; }
  </style>
</head>
<body>

  <!-- Overlay Navbar -->
  <header id="main-header" class="fixed top-0 left-0 w-full z-50 pointer-events-auto transition-all duration-300">
    <div id="nav-inner" class="w-full px-4 sm:px-6 lg:px-8 py-6 flex justify-between items-center transition-all duration-300">
      <div id="logo-container" class="opacity-0 transition-opacity duration-300">
        <a href="#home" id="home-link" class="text-xl font-bold tracking-widest text-white">GENKI / 元気</a>
      </div>
      <nav class="flex space-x-4 items-center">
        <!-- Search -->
        <div id="search-toggle-container" class="relative">
          <button id="search-toggle-button" aria-label="Search" class="p-2 text-white/90 hover:text-white transition duration-150 hover:bg-white/10 z-10" onclick="toggleSearchInput(event)">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
          </button>
          <div id="search-input-container" class="bg-neutral-800 shadow-xl border border-white/10">
            <input type="text" id="header-search-input" placeholder="Search products..." class="w-full h-10 p-2 bg-transparent text-white text-sm focus:outline-none">
            <button aria-label="Submit Search" class="absolute right-0 top-0 h-full w-10 text-white/70 hover:text-white transition" onclick="performSearchAndRoute()">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto"><line x1="21" y1="21" x2="16.65" y2="16.65"></line><circle cx="11" cy="11" r="8"></circle></svg>
            </button>
          </div>
        </div>
        <button aria-label="Login" class="p-2 text-white/90 hover:text-white transition duration-150 hover:bg-white/10">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        </button>
        <button aria-label="Wishlist" class="p-2 text-white/90 hover:text-white transition duration-150 hover:bg-white/10">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path></svg>
        </button>
        <button id="cart-toggle" aria-label="Shopping Bag" class="relative p-2 text-white/90 hover:text-white transition duration-150 hover:bg-white/10">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
          <span id="cart-count" class="absolute -top-1 -right-1 min-w-5 h-5 px-1 bg-white text-[11px] text-black rounded-full flex items-center justify-center font-bold">0</span>
        </button>
      </nav>
    </div>
  </header>
  </header>


  <!-- MAIN CONTENT CONTAINER (SPA) -->
  <main id="app-container" class="pt-0">
    <!-- 1. HOME PAGE (Hero & Featured) -->
  <div id="home-page" class="page-content">
    <!-- Hero Section -->
     <!-- Hero background layer -->
<div class="absolute inset-0 -z-10 pointer-events-none">
 <img
  src="https://res.cloudinary.com/dzhvdoifb/image/upload/v1762066135/WtBAmJy_nidtmq.webp"
  alt=""
  class="w-full h-full object-cover"
  loading="eager"
 />
 <!-- Contrast safety overlay -->
 <div class="absolute inset-0 bg-black/60"></div>
</div>

    <section class="hero-height flex flex-col justify-center items-center relative px-6 text-center">
      

      <h1 id="hero-title" class="text-6xl sm:text-8xl md:text-[12rem] lg:text-[16rem] leading-none tracking-tighter uppercase mb-4">
        <!-- Text Injected by JS -->
      </h1>
      <p class="text-[10px] md:text-xs tracking-[0.3em] uppercase opacity-60"><!-- Season 00: Urban Dystopia -->Live lively</p>
      
      <div class="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce cursor-pointer" onclick="document.getElementById('new-arrivals-section').scrollIntoView({behavior:'smooth'})">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M7 13l5 5 5-5M7 6l5 5 5-5"/></svg>
      </div>
    </section>


      <!-- NEW ITEMS -->
      <section id="new-arrivals-section" class="py-20 md:py-24 bg-[#0d0d0d]">
        <div class="px-4 sm:px-6 lg:px-8">
          <h2 class="text-3xl md:text-4xl font-bold mb-10 text-white border-b border-white/10 pb-4">NEW ARRIVALS</h2>
          <div id="new-items-carousel" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6 overflow-hidden">
            <!-- Cards kept identical to your original -->
            <div class="bg-transparent overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-[1.02] transition duration-300 border border-white/10 cursor-pointer" onclick="window.location.hash='#genki-esquire-jacket'">
              <div class="relative overflow-hidden">
                <img src="https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305211008-2.png" alt="Genki Esquire Packable Jacket" class="w-full h-64 object-cover transition duration-300 hover:opacity-80" onerror="this.onerror=null;this.src='https://placehold.co/600x600/222222/ffffff?text=Genki+Esquire+Packable+Jacket'">
                <span class="absolute top-3 right-3 bg-blue-900 text-white text-xs px-2 py-1 font-medium">NEW</span>
              </div>
              <div class="p-4 text-center">
                <h3 class="text-lg font-semibold text-white mb-1">Genki Esquire Packable Jacket</h3>
                <p class="text-sm text-gray-400 mb-3">$40.00</p>
                <div class="flex justify-center space-x-2">
                  <div class="w-4 h-4 bg-black border border-white/50" title="Black"></div>
                  <div class="w-4 h-4 bg-gray-500 border border-gray-600" title="Grey"></div>
                </div>
              </div>
            </div>
            <div class="bg-transparent overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-[1.02] transition duration-300 border border-white/10 cursor-pointer" onclick="window.location.hash='#acd-kancho-hancho-shirt'">
              <div class="relative overflow-hidden">
                <img src="https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176586211717117-1.png" alt="ACD Kancho Hancho Button Up Shirt" class="w-full h-64 object-cover transition duration-300 hover:opacity-80" onerror="this.onerror=null;this.src='https://placehold.co/600x600/1a1a1a/ffffff?text=Cropped+Hoodie'">
               <span class="absolute top-3 right-3 bg-blue-900 text-white text-xs px-2 py-1 font-medium">NEW</span>
              </div>
              <div class="p-4 text-center">
                <h3 class="text-lg font-semibold text-white mb-1">ACD Kancho Hancho Button Up Shirt</h3>
                <p class="text-sm text-gray-400 mb-3">$50.00</p>
              </div>
            </div>
            <div class="bg-transparent overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-[1.02] transition duration-300 border border-white/10 cursor-pointer" onclick="window.location.hash='#genki-sakura-hoodie'">
              <div class="relative overflow-hidden">
                <img src="https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17658626415530-0.png" alt="Genki Sakura Heavy Hoodie" class="w-full h-64 object-cover transition duration-300 hover:opacity-80" onerror="this.onerror=null;this.src='https://placehold.co/600x600/4a4a4a/ffffff?text=Sakura+Hoodie'">
               <span class="absolute top-3 right-3 bg-blue-900 text-white text-xs px-2 py-1 font-medium">NEW</span>
              </div>
              <div class="p-4 text-center">
                <h3 class="text-lg font-semibold text-white mb-1">Genki Sakura Heavy Hoodie</h3>
                <p class="text-sm text-gray-400 mb-3">$40.00</p>
                <div class="flex justify-center space-x-2">
                  <div class="w-4 h-4 bg-black border border-white/50" title="Black"></div>
                  <div class="w-4 h-4 bg-pink-200 border border-white/50" title="Pink"></div>
                  <div class="w-4 h-4 bg-red-950 border border-white/50" title="Maroon"></div>
                  <div class="w-4 h-4 bg-emerald-950 border border-white/50" title="Forest Green"></div>
                  <div class="w-4 h-4 bg-blue-300 border border-white/50" title="Blue"></div>
              </div>
              </div>
            </div>
            <div class="bg-transparent overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-[1.02] transition duration-300 hidden md:block border border-white/10 cursor-pointer" onclick="window.location.hash='#acd-neko-pastel-cap'">
              <div class="relative overflow-hidden">
                <img src="https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212418-2.png" alt="ACD Neko Pastel Baseball Cap" class="w-full h-64 object-cover transition duration-300 hover:opacity-80" onerror="this.onerror=null;this.src='https://placehold.co/600x600/d6d6d6/000000?text=Pastel+Neko+Cap'">
               <span class="absolute top-3 right-3 bg-blue-900 text-white text-xs px-2 py-1 font-medium">NEW</span>
              </div>
              <div class="p-4 text-center">
                <h3 class="text-lg font-semibold text-white mb-1">ACD Neko Pastel Baseball Cap</h3>
                <p class="text-sm text-gray-400 mb-3">$30.00</p>
                <div class="flex justify-center space-x-2">
                  <div class="w-4 h-4 bg-pink-50 border border-white/50" title="Pastel Pink"></div>
                  <div class="w-4 h-4 bg-yellow-50 border border-white/50" title="Pastel Lemon"></div>
                  <div class="w-4 h-4 bg-green-50 border border-white/50" title="Pastel Mint"></div>
                  <div class="w-4 h-4 bg-blue-50 border border-white/50" title="Pastel Blue"></div>
              </div>
                </div>
            </div>
            <div class="bg-transparent overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-[1.02] transition duration-300 hidden xl:block border border-white/10 cursor-pointer" onclick="window.location.hash='#genki-america-snapback'">
              <div class="relative overflow-hidden">
                <img src="https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17617999204796-0.png" alt="[GENKI] Make America Genki Again Electric Blue Snapback" class="w-full h-64 object-cover transition duration-300 hover:opacity-80" onerror="this.onerror=null;this.src='https://placehold.co/600x600/0000ff/ffffff?text=Electric+Blue+Snapback'">
               <span class="absolute top-3 right-3 bg-blue-900 text-white text-xs px-2 py-1 font-medium">NEW</span>
              </div>
              <div class="p-4 text-center">
                <h3 class="text-lg font-semibold text-white mb-1">Make America Genki Again Snapback</h3>
                <p class="text-sm text-gray-400 mb-3">$30.00</p>
              </div>
            </div>
          </div>
          <div class="text-center mt-10 space-x-4">
            <a href="#new" class="inline-block px-8 py-3 bg-neutral-600 text-white font-semibold uppercase tracking-widest text-sm border border-neutral-500 hover:bg-gray-200 hover:text-black transition duration-150">Shop New</a>
            <a href="#shop" class="inline-block px-8 py-3 bg-neutral-600 text-white font-semibold uppercase tracking-widest text-sm border border-neutral-500 hover:bg-gray-200 hover:text-black transition duration-150">Shop All</a>
          </div>
        </div>
      </section>
      
      <!-- 1.3 LOOKBOOK TILE WALL (Full Width Content) -->
      <section class="py-20 md:py-24 bg-[#0d0d0d]">
        <div class="w-full px-0">
            <h2 class="text-3xl md:text-4xl font-bold mb-10 text-white border-b border-white/10 pb-4 text-center">LOOKBOOK</h2>

            <!-- Full-bleed photo wall: zero gap so images touch the edges; smaller gaps on md -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-0 md:gap-1">
              <div class="col-span-2 row-span-2 overflow-hidden">
                <a href="#lookbook-1"><img src="https://res.cloudinary.com/dzhvdoifb/image/upload/v1762066135/WtBAmJy_nidtmq.webp" alt="Lookbook Image 1" class="w-full h-full object-cover transition-transform duration-300 cursor-pointer" style="max-height:70vh;"></a>
              </div>
              <div class="col-span-2 overflow-hidden">
                <a href="#lookbook-2"><img src="https://res.cloudinary.com/dzhvdoifb/image/upload/v1762748940/I0P8IHJ_oxbf46.webp" alt="Lookbook Image 2" class="w-full h-full object-cover transition-transform duration-300 cursor-pointer" style="max-height:40vh;"></a>
              </div>
              <div class="overflow-hidden">
                <a href="#lookbook-3"><img src="https://res.cloudinary.com/dzhvdoifb/image/upload/v1762748935/0AA3u2l_iwzzvt.webp" alt="Lookbook Image 3" class="w-full h-full object-cover transition-transform duration-300 cursor-pointer"></a>
              </div>
              <div class="overflow-hidden">
                <a href="#lookbook-4"><img src="https://res.cloudinary.com/dzhvdoifb/image/upload/v1762752906/6EiT5o1_nhvhwf.webp" alt="Lookbook Image 4" class="w-full h-full object-cover transition-transform duration-300 cursor-pointer"></a>
              </div>
            </div>

          <!-- Button is sharp -->
          <div class="text-center mt-10">
            <a href="#lookbook-main" class="inline-block px-8 py-3 bg-neutral-600 text-white font-semibold uppercase tracking-widest text-sm border border-neutral-500 hover:bg-gray-200 hover:text-black transition duration-150">View Full Lookbook</a>
          </div>
        </div>
      </section>
    </div>
    
    <!-- ============================================== -->
    <!-- 2. SHOP NEW PAGE (Pure Grid) - All cards are sharp -->
    <!-- ============================================== -->
    <div id="new-page" class="page-content py-24">
      <div class="px-4 sm:px-6 lg:px-8">
        <h2 class="text-5xl font-extrabold mb-12 text-white tracking-tighter">NEW ARRIVALS 2025 / Q4</h2>
        
        <!-- ACCENT CHANGE: border-red-600 -> border-white/20 -->
        <p class="text-gray-400 mb-8 max-w-4xl border-l-4 border-white/20 pl-4">Introducing the latest drops from GENKI. Limited runs focused on technical fabrics, oversized fits, and distressed finishes. Everything here is fresh.</p>

        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
          <!-- Product Card 1: Esquire Jacket -->
          <div class="bg-transparent overflow-hidden shadow-lg border border-white/10 cursor-pointer hover:border-white" onclick="window.location.hash='#genki-esquire-jacket'">
            <div class="relative overflow-hidden">
              <img src="https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305211008-2.png" alt="ACD Unfinished Organic Sweatshirt" class="w-full h-80 object-cover">
             <span class="absolute top-3 right-3 bg-blue-900 text-white text-xs px-2 py-1 font-medium">NEW</span>
             
            </div>
            <div class="p-4">
              <h3 class="font-semibold text-white mb-1">Genki Esquire Paclable Jacket</h3>
              <p class="text-sm text-gray-400">$34.00</p>
            </div>
          </div>
          <!-- Product Card 2:kancho Hancho Button Up -->
          <div class="bg-transparent overflow-hidden shadow-lg border border-white/10 cursor-pointer hover:border-white" onclick="window.location.hash='#acd-kancho-hancho-shirt'">
            <div class="relative overflow-hidden">
              <img src="https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176586211717117-1.png" alt="ACD Kancho Hancho Button Up" class="w-full h-80 object-cover">
             <span class="absolute top-3 right-3 bg-blue-900 text-white text-xs px-2 py-1 font-medium">NEW</span>  
            </div>
            <div class="p-4">
              <h3 class="font-semibold text-white mb-1">ACD Kancho Hancho Button Up</h3>
              <p class="text-sm text-gray-400">$41.00</p>
            </div>
          </div>
          <!-- Product Card 3: Genki Sakura Heavy Hoodie -->
          <div class="bg-transparent overflow-hidden shadow-lg border border-white/10 cursor-pointer hover:border-white" onclick="window.location.hash='#genki-sakura-hoodie'">
            <div class="relative overflow-hidden">
              <img src="https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17658626415530-0.png" alt="Genki Sakura Heavy Hoodie" class="w-full h-80 object-cover">
             <span class="absolute top-3 right-3 bg-blue-900 text-white text-xs px-2 py-1 font-medium">NEW</span>
            </div>
            <div class="p-4">
              <h3 class="font-semibold text-white mb-1">Genki Sakura Heavy Hoodie</h3>
              <p class="text-sm text-gray-400">$38.00</p>
            </div>
          </div>
          <!-- Product Card 4: ACD Neko Pastel Baseball Cap -->
          <div class="bg-transparent overflow-hidden shadow-lg border border-white/10 cursor-pointer hover:border-white" onclick="window.location.hash='#acd-neko-pastel-cap'">
            <div class="relative overflow-hidden">
              <img src="https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212418-2.png" alt="ACD Neko Pastel Baseball Cap" class="w-full h-80 object-cover">
             <span class="absolute top-3 right-3 bg-blue-900 text-white text-xs px-2 py-1 font-medium">NEW</span> 
            </div>
            <div class="p-4">
              <h3 class="font-semibold text-white mb-1">ACD Neko Pastel Baseball Cap</h3>
              <p class="text-sm text-gray-400">$30.00</p>
            </div>
          </div>
          <!-- Product Card 5: GENKI Make America Genki Again Snapback -->
          <div class="bg-transparent overflow-hidden shadow-lg border border-white/10 cursor-pointer hover:border-white" onclick="window.location.hash='#genki-america-snapback'">
            <div class="relative overflow-hidden">
              <img src="https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17617999204796-0.png" alt="[GENKI] Make America Genki Again Electric Blue Snapback" class="w-full h-80 object-cover">
             <span class="absolute top-3 right-3 bg-blue-900 text-white text-xs px-2 py-1 font-medium">NEW</span>
              
            </div>
            <div class="p-4">
              <h3 class="font-semibold text-white mb-1">Make America Genki Again Snapback</h3>
              <p class="text-sm text-gray-400">$30.00</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ============================================== -->
    <!-- 3. SHOP ALL PAGE (Categorized View) - Now handles dynamic product rendering/search -->
    <!-- ============================================== -->
    <div id="shop-page" class="page-content py-24">
      <div class="px-4 sm:px-6 lg:px-8">
        <h2 id="shop-title" class="text-5xl font-extrabold mb-12 text-white tracking-tighter">ALL PRODUCTS</h2>

        <div class="flex flex-col md:flex-row gap-8">
          <!-- Sidebar (Categories/Filters) - Now sharp -->
          <aside class="w-full md:w-64 flex-shrink-0 bg-neutral-800/50 p-6 border border-white/10">
            <h3 class="text-xl font-bold mb-4 border-b border-white/10 pb-2">CATEGORIES</h3>
            <ul class="space-y-2">
              <!-- categories links are functional with filtering (Counts updated for new 10 products) -->
              <li><a href="#shop/categories-all" class="text-white hover:text-white/70 transition block" data-categories="all" data-label="All Products">All Products</a></li>
              <li><a href="#shop/categories-tops" class="text-white hover:text-white/70 transition block" data-categories="Tops" data-label="Tops">Tops</a></li>
              <li><a href="#shop/categories-bottoms" class="text-white hover:text-white/70 transition block" data-categories="Bottoms" data-label="Bottoms">Bottoms</a></li>
              <li><a href="#shop/categories-outerwear" class="text-white hover:text-white/70 transition block" data-categories="Outerwear" data-label="Outerwear">Outerwear</a></li>
              <li><a href="#shop/categories-accessories" class="text-white hover:text-white/70 transition block" data-categories="Accessories" data-label="Accessories">Accessories</a></li>
            </ul>
            
            <h3 class="text-xl font-bold mt-8 mb-4 border-b border-white/10 pb-2">FILTER</h3>
            <div class="space-y-3 text-sm">
              <p class="text-gray-300">Basic Filters (Static for Demo)</p>
              <label class="flex items-center text-gray-300">
                <input type="checkbox" class="form-checkbox text-white bg-gray-700 border-gray-600 mr-2 focus:ring-2 focus:ring-white">
                In Stock
              </label>
              <label class="flex items-center text-gray-500">
                <input type="checkbox" checked class="form-checkbox text-white bg-gray-700 border-gray-600 mr-2 focus:ring-2 focus:ring-white">
                On Sale
              </label>
            </div>
          </aside>

          <!-- Product Grid (Main Content) - DYNAMICALLY POPULATED HERE -->
         <!---->  <section class="flex-1">
            <div id="shop-product-grid" class="grid grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
              <!-- Products will be injected by JavaScript here -->
            </div>
          </section>
        </div>
      </div>
    </div>

    <!-- ============================================== -->
    <!-- 3b. ABOUT PAGE -->
    <!-- ============================================== -->
    <div id="about-page" class="page-content py-24">
      <div class="px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto space-y-10">
        <div class="flex flex-col lg:flex-row gap-10 lg:items-center">
          <div class="space-y-4">
            <p class="text-xs uppercase tracking-[0.35em] text-white/60">About Genki</p>
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight">Streetwear built for real life, not just the gram.</h1>
            <p class="text-gray-300 leading-relaxed">GENKI is an independent label shaped by the cities we move through and the people who wear our stuff daily. We design practical, durable pieces with bold graphics and playful drops—then hand the mic to the community to show how it really lives.</p>
            <div class="flex flex-wrap gap-3">
              <a href="#shop" class="px-6 py-3 bg-white text-black font-semibold uppercase tracking-widest text-sm hover:bg-gray-200 transition">Shop the collection</a>
              <a href="#lookbook-main" class="px-6 py-3 border border-white/30 text-white font-semibold uppercase tracking-widest text-sm hover:border-white transition">See the lookbook</a>
            </div>
          </div>
          <div class="relative flex-1">
            <div class="absolute inset-4 bg-gradient-to-br from-white/10 via-white/5 to-transparent blur-3xl pointer-events-none"></div>
            <img src="https://res.cloudinary.com/dzhvdoifb/image/upload/v1762748940/I0P8IHJ_oxbf46.webp" alt="GENKI look" class="relative w-full h-full object-cover border border-white/10 shadow-2xl">
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="bg-neutral-900/60 border border-white/10 p-6 space-y-2">
            <p class="text-xs uppercase tracking-[0.3em] text-white/50">Who we are</p>
            <h3 class="text-xl font-semibold">Independent & community-led</h3>
            <p class="text-gray-400 text-sm">Small team, big output. We drop limited runs and amplify photos from the people actually wearing them.</p>
          </div>
          <div class="bg-neutral-900/60 border border-white/10 p-6 space-y-2">
            <p class="text-xs uppercase tracking-[0.3em] text-white/50">What we make</p>
            <h3 class="text-xl font-semibold">Utility with attitude</h3>
            <p class="text-gray-400 text-sm">Oversized hoods, packable layers, graphic tees, and accessories built to survive late nights and early trains.</p>
          </div>
          <div class="bg-neutral-900/60 border border-white/10 p-6 space-y-2">
            <p class="text-xs uppercase tracking-[0.3em] text-white/50">Why we do it</p>
            <h3 class="text-xl font-semibold">Make life less beige</h3>
            <p class="text-gray-400 text-sm">We’re here to add color and character to everyday fits—made to be worn hard, not kept in the closet.</p>
          </div>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="bg-neutral-900/60 border border-white/10 p-4 text-center">
            <div class="text-3xl font-bold text-white">50+</div>
            <p class="text-xs uppercase tracking-[0.2em] text-gray-400 mt-2">Unique SKUs</p>
          </div>
          <div class="bg-neutral-900/60 border border-white/10 p-4 text-center">
            <div class="text-3xl font-bold text-white">12</div>
            <p class="text-xs uppercase tracking-[0.2em] text-gray-400 mt-2">Cities repped</p>
          </div>
          <div class="bg-neutral-900/60 border border-white/10 p-4 text-center">
            <div class="text-3xl font-bold text-white">Community</div>
            <p class="text-xs uppercase tracking-[0.2em] text-gray-400 mt-2">Lookbook first</p>
          </div>
          <div class="bg-neutral-900/60 border border-white/10 p-4 text-center">
            <div class="text-3xl font-bold text-white">Made to last</div>
            <p class="text-xs uppercase tracking-[0.2em] text-gray-400 mt-2">Stitch & fabric tested</p>
          </div>
        </div>

        <div class="bg-neutral-900/50 border border-white/10 p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <p class="text-xs uppercase tracking-[0.3em] text-white/50">Community</p>
            <h3 class="text-2xl font-bold mb-2">Send us your fits</h3>
            <p class="text-gray-300 text-sm mb-3">We feature user shots in the lookbook. Tag us or drop a link and we’ll shout you out.</p>
            <a href="#lookbook-main" class="text-sm underline underline-offset-4 hover:text-white transition">View the lookbook</a>
          </div>
          <div class="grid grid-cols-3 gap-2">
            <img src="https://res.cloudinary.com/dzhvdoifb/image/upload/v1762748929/2hW9VA8_nnfzy0.webp" alt="Look 1" class="h-28 w-full object-cover border border-white/10">
            <img src="https://res.cloudinary.com/dzhvdoifb/image/upload/v1762748940/I0P8IHJ_oxbf46.webp" alt="Look 2" class="h-28 w-full object-cover border border-white/10">
            <img src="https://res.cloudinary.com/dzhvdoifb/image/upload/v1762752906/6EiT5o1_nhvhwf.webp" alt="Look 3" class="h-28 w-full object-cover border border-white/10">
          </div>
        </div>
      </div>
    </div>

    <!-- ============================================== -->
    <!-- 3c. COLLABS PAGE -->
    <!-- ============================================== -->
    <div id="collabs-page" class="page-content py-24">
      <div class="px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto space-y-8">
        <div class="flex flex-col lg:flex-row gap-8 lg:items-center">
          <div class="space-y-4">
            <p class="text-xs uppercase tracking-[0.35em] text-white/60">Collabs</p>
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight">Let’s build something together.</h1>
            <p class="text-gray-300 leading-relaxed">We collaborate with artists, bands, crews, and brands that share our love for bold graphics and functional gear. Limited drops, small runs, big impact.</p>
            <div class="flex flex-wrap gap-3">
              <a href="mailto:ayyjayy.genki@gmail.com" class="px-6 py-3 bg-white text-black font-semibold uppercase tracking-widest text-sm hover:bg-gray-200 transition">Email ayyjayy.genki@gmail.com</a>
              <a href="#new" class="px-6 py-3 border border-white/30 text-white font-semibold uppercase tracking-widest text-sm hover:border-white transition">View recent drops</a>
            </div>
          </div>
          <div class="relative flex-1">
            <div class="absolute inset-4 bg-gradient-to-br from-white/10 via-white/5 to-transparent blur-3xl pointer-events-none"></div>
            <img src="https://res.cloudinary.com/dzhvdoifb/image/upload/v1762748929/2hW9VA8_nnfzy0.webp" alt="Collab visual" class="relative w-full h-full object-cover border border-white/10 shadow-2xl">
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="bg-neutral-900/60 border border-white/10 p-6 space-y-2">
            <p class="text-xs uppercase tracking-[0.3em] text-white/50">Types</p>
            <h3 class="text-xl font-semibold">Artist & band merch</h3>
            <p class="text-gray-400 text-sm">Short-run tees, hoods, hats, and accessories with split revenue and shared promo.</p>
          </div>
          <div class="bg-neutral-900/60 border border-white/10 p-6 space-y-2">
            <p class="text-xs uppercase tracking-[0.3em] text-white/50">Process</p>
            <h3 class="text-xl font-semibold">Co-design sprints</h3>
            <p class="text-gray-400 text-sm">We swap moodboards, prototypes, and samples fast—then drop limited capsules.</p>
          </div>
          <div class="bg-neutral-900/60 border border-white/10 p-6 space-y-2">
            <p class="text-xs uppercase tracking-[0.3em] text-white/50">Distribution</p>
            <h3 class="text-xl font-semibold">Shared spotlight</h3>
            <p class="text-gray-400 text-sm">Featured in our shop, lookbook, and socials with your channels co-promoting.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ============================================== -->
    <!-- 3d. CONTACT PAGE -->
    <!-- ============================================== -->
    <div id="contact-page" class="page-content py-24">
      <div class="px-4 sm:px-6 lg:px-8 max-w-4xl mx-auto space-y-8">
        <div class="space-y-3">
          <p class="text-xs uppercase tracking-[0.35em] text-white/60">Contact</p>
          <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight">Hit us up.</h1>
          <p class="text-gray-300 leading-relaxed">Questions, sizing help, wholesale, or press? Drop a line and we’ll get back fast.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="bg-neutral-900/60 border border-white/10 p-6 space-y-3">
            <h3 class="text-xl font-semibold">General</h3>
            <p class="text-gray-400 text-sm">Email: <a href="mailto:ayyjayy.genki@gmail.com" class="underline underline-offset-4 hover:text-white">ayyjayy.genki@gmail.com</a></p>
            <br>
            <a href="https://www.instagram.com/weargenki/" class="text-gray-400 text-sm">DM: @WearGenki on IG</a>
          <i class="fa fa-instagram" style="font-size:48px;color:red"></i>
          </div>
          <div class="bg-neutral-900/60 border border-white/10 p-6 space-y-3">
            <h3 class="text-xl font-semibold">Collabs & Press</h3>
            <p class="text-gray-400 text-sm"><a href="mailto:ayyjayy.genki@gmail.com?subject=Collab" class="underline underline-offset-4 hover:text-white">Reach out to Collab</a></p>
            <p class="text-gray-400 text-sm">Press kit on request.</p>
          </div>
        </div>

        <div class="bg-neutral-900/50 border border-white/10 p-6 space-y-4">
          <h3 class="text-xl font-semibold">Need help fast?</h3>
          <p class="text-gray-300 text-sm">Check FAQs or ping us with your order number for returns/exchanges.</p>
          <div class="flex flex-wrap gap-3">
            <a href="#shop" class="px-5 py-3 bg-white text-black font-semibold uppercase tracking-widest text-xs hover:bg-gray-200 transition">Shop</a>
            <a href="#lookbook-main" class="px-5 py-3 border border-white/30 text-white font-semibold uppercase tracking-widest text-xs hover:border-white transition">Lookbook</a>
          </div>
        </div>
      </div>
    </div>

    <!-- ============================================== -->
    <!-- 3d. CHECKOUT PAGE -->
    <!-- ============================================== -->
    <div id="checkout-page" class="page-content py-24">
      <div class="px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto space-y-8">
        <div class="flex flex-wrap items-center justify-between gap-4">
          <div class="space-y-2">
            <p class="text-xs uppercase tracking-[0.35em] text-white/60">Checkout</p>
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight">Review & pay</h1>
            <p class="text-gray-400 leading-relaxed">Confirm your order and shipping details before payment.</p>
          </div>
          <a href="#shop" class="text-sm text-gray-400 hover:text-white transition underline underline-offset-4">Continue shopping</a>
        </div>

        <div class="grid gap-8 lg:grid-cols-12">
          <section class="lg:col-span-7 space-y-4">
            <div class="flex items-center justify-between">
              <h2 class="text-xl font-semibold tracking-wide">Your cart</h2>
              <span class="text-xs text-gray-400 uppercase tracking-[0.3em]">Items</span>
            </div>
            <div id="cart-items" class="space-y-4"></div>
            <div class="border-t border-white/10 pt-4 flex items-center justify-between">
              <span class="text-sm text-gray-400">Subtotal</span>
              <span id="cart-subtotal" class="text-lg font-bold">$0.00</span>
            </div>
          </section>

          <section id="checkout-form" class="lg:col-span-5 space-y-4 bg-neutral-900/60 border border-white/10 p-6">
            <h2 class="text-xl font-semibold tracking-wide">Payment</h2>
            <p class="text-xs text-gray-400">Pay securely without leaving the site.</p>
            <p id="square-test-note" class="text-xs text-yellow-400 hidden">Test mode: no payment will be collected.</p>
            <div class="space-y-3">
              <input id="sq-name" type="text" placeholder="Full name" class="w-full bg-neutral-800 border border-white/10 p-2 text-white" />
              <input id="sq-email" type="email" placeholder="Email" class="w-full bg-neutral-800 border border-white/10 p-2 text-white" />
              <div class="flex flex-col gap-3 sm:flex-row">
                <input id="sq-address" type="text" placeholder="Shipping address" class="w-full flex-1 bg-neutral-800 border border-white/10 p-2 text-white" />
                <input id="sq-address-2" type="text" placeholder="Apt, suite (optional)" class="w-full flex-1 bg-neutral-800 border border-white/10 p-2 text-white" />
              </div>
              <div class="grid grid-cols-1 gap-3 sm:grid-cols-3">
                <input id="sq-city" type="text" placeholder="City" class="w-full bg-neutral-800 border border-white/10 p-2 text-white" />
                <input id="sq-state" type="text" placeholder="State" class="w-full bg-neutral-800 border border-white/10 p-2 text-white" />
                <input id="sq-zip" type="text" placeholder="ZIP" class="w-full bg-neutral-800 border border-white/10 p-2 text-white" />
              </div>
              <textarea id="sq-notes" type="text" placeholder="Extra Notes (optional)" class="w-full bg-neutral-800 border border-white/10 p-2 text-white"></textarea>
              <button id="square-pay-later" class="w-full py-3 border border-white/20 text-white font-semibold uppercase tracking-widest text-xs hover:border-white transition">Submit order without payment</button>
              
              <p class="text-xs uppercase tracking-[0.3em] text-white/60">Card details (required for Pay Now)</p>
              <button id="square-pay" class="w-full py-3 bg-white text-black font-bold tracking-widest hover:bg-gray-200">Pay Now</button>
              <div id="square-card-container" class="bg-neutral-800 border border-white/10 p-3 rounded"></div>
              <p class="text-xs text-gray-500">Payment is optional, but appreciated. You can submit your order now and pay later.</p>
              
              
              <p id="square-error" class="text-sm text-red-400 hidden"></p>
            </div>
          </section>
        </div>
      </div>
    </div>

    <!-- ============================================== -->
    <!-- 3e. CHECKOUT SUCCESS PAGE -->
    <!-- ============================================== -->
    <div id="checkout-success-page" class="page-content py-24">
      <div class="px-4 sm:px-6 lg:px-8 max-w-3xl mx-auto text-center space-y-4">
        <p class="text-xs uppercase tracking-[0.35em] text-white/60">Success</p>
        <h1 id="checkout-success-title" class="text-4xl md:text-5xl font-extrabold tracking-tight">Order received</h1>
        <p id="checkout-success-copy" class="text-gray-300 leading-relaxed">We'll process your order shortly. Check your email for the receipt.</p>
        <p class="text-sm text-gray-400">Cancel code: <span id="checkout-cancel-code" class="text-white font-semibold tracking-widest">—</span></p>
        <p class="text-xs text-gray-500">You can cancel this order within <span id="checkout-cancel-window">12</span> hours.</p>
        <div class="flex items-center justify-center gap-3">
          <a href="#shop" class="px-6 py-3 bg-white text-black font-semibold uppercase tracking-widest text-sm hover:bg-gray-200 transition">Back to shop</a>
          <a href="#contact" class="px-6 py-3 border border-white/30 text-white font-semibold uppercase tracking-widest text-sm hover:border-white transition">Need help?</a>
        </div>
      </div>
    </div>

    <!-- ============================================== -->
    <!-- 4. LOOKBOOK ITEM PAGE (single look detail) -->
    <div id="lookbook-item-page" class="page-content py-24">
      <div class="px-4 sm:px-6 lg:px-8">
        <a href="#home" class="text-sm text-gray-400 hover:text-white mb-6 flex items-center transition">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="m15 18-6-6 6-6"></path></svg>
          Back to Home
        </a>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mt-4 items-start">
          <div>
            <img id="look-main-image" src="https://placehold.co/1200x1600/222222/cccccc?text=Look+Main" alt="Look Main" class="w-full object-cover shadow-xl border border-white/10">
          </div>
          <div class="space-y-6">
            <h1 id="look-title" class="text-4xl md:text-5xl font-extrabold">Look Title</h1>
            <p id="look-caption" class="text-gray-400">A short caption and styling notes for this look.</p>
            <div>
              <a id="look-linked-product" href="#" class="inline-block px-6 py-3 bg-white text-black font-semibold uppercase tracking-widest text-sm hover:bg-gray-200 transition">View Product</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ============================================== -->
    <!-- 4b. LOOKBOOK MAIN PAGE (Full gallery of user + brand photos) -->
    <!-- ============================================== -->
    <div id="lookbook-main-page" class="page-content py-24">
      <div class="px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto space-y-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-xs uppercase tracking-[0.35em] text-white/60">Lookbook</p>
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight">People & Fits</h1>
            <p class="text-gray-400 max-w-2xl mt-2">Submissions from the GENKI community plus in-house looks we shoot for fun.</p>
          </div>
          <a href="#home" class="text-sm text-gray-400 hover:text-white transition underline underline-offset-4">Back</a>
        </div>

        <div id="lookbook-main-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
          <!-- Cards injected via JS -->
        </div>
      </div>
    </div>

    <!-- ============================================== -->
    <!-- 5. PRODUCT DETAIL PAGE (Placeholder for any product click) -->
    <!-- ============================================== -->
    <div id="product-page" class="page-content py-24">
      <div class="px-4 sm:px-6 lg:px-8 max-w-7xl">
        <!-- ACCENT CHANGE: hover:text-red-600 -> hover:text-white -->
        <a href="#shop" class="text-sm text-gray-400 hover:text-white mb-6 flex items-center transition">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="m15 18-6-6 6-6"></path></svg>
          Back to All Products
        </a>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mt-4">
          <!-- Image Gallery (All images and containers are sharp) -->
          <div class="space-y-4">
            <img id="product-main-image" src="https://placehold.co/1200x1600/333333/ffffff?text=Oversized+Hoodie+%28Front%29" alt="Product Main Image" class="w-full shadow-xl border border-white/10" style="max-height:65vh; aspect-ratio: 4 / 5; object-fit: contain; width:100%; height:auto;">
            <div id="product-thumbs" class="grid grid-cols-3 gap-4">
              <img data-index="0" class="product-thumb w-full h-32 object-cover border border-white/10 cursor-pointer hover:opacity-80 transition" src="https://placehold.co/600x600/444444/ffffff?text=Detail+1" alt="Thumb 1">
              <img data-index="1" class="product-thumb w-full h-32 object-cover border border-white/10 cursor-pointer hover:opacity-80 transition" src="https://placehold.co/600x600/555555/ffffff?text=Detail+2" alt="Thumb 2">
              <img data-index="2" class="product-thumb w-full h-32 object-cover border border-white/10 cursor-pointer hover:opacity-80 transition" src="https://placehold.co/600x600/666666/ffffff?text=Back+View" alt="Thumb 3">
            </div>
          </div>
          <!-- Product Details -->
          <div class="space-y-8">
            <div class="border-b border-white/10 pb-6">
              <span id="product-badge" class="text-xs font-medium uppercase tracking-widest text-white border border-white/50 px-1 py-0.5 inline-block">New Arrival</span>
              <h1 id="product-title" class="text-4xl md:text-5xl font-extrabold mt-1 mb-2">The 'GHOST' Oversized Hoodie</h1>
              <p id="product-price" class="text-3xl font-light text-white">$120.00 </p>
            </div>

            <!-- Variant Selectors (Skull first, then Hoodie) -->
            <div id="product-skull-block">
              <p class="text-lg font-semibold mb-3">Skull: <span id="product-skull-name" class="text-white">-</span></p>
              <div id="product-skull-colors" class="flex space-x-3">
                <!-- Skull options injected when available -->
              </div>
            </div>
            <div id="product-hoodie-block" class="mt-4">
              <p class="text-lg font-semibold mb-3">Color: <span id="product-hoodie-name" class="text-white">-</span></p>
              <div id="product-hoodie-colors" class="flex space-x-3">
                <!-- Colors dynamically injected by JS -->
              </div>
            </div>

            <!-- Size Selector (dynamic per product) -->
            <div id="product-size-block">
              <p class="text-lg font-semibold mb-3">Size: <span id="product-size-name" class="text-white">-</span></p>
              <div id="product-sizes" class="grid grid-cols-4 gap-2 max-w-sm">
                <!-- Sizes injected by JS -->
              </div>
              <a href="#size-guide" class="text-sm text-gray-500 mt-2 block hover:text-white transition">View Size Guide</a>
            </div>
            
            <!-- Add to Cart Button is sharp -->
            <button id="product-add-to-cart" class="w-full py-4 bg-white text-black font-extrabold uppercase tracking-widest text-lg hover:bg-gray-200 transition duration-150 shadow-2xl">ADD TO CART</button>

            <!-- Description -->
            <div>
              <p class="text-lg font-semibold mb-3">Details & Fit</p>
              <ul id="product-details-list" class="text-gray-400 text-sm space-y-2 list-disc list-inside">
                <!-- details populated by JS -->
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>


  </main>

   <!-- FormSubmit order slip (test mode, no payment) -->
  <form id="order-slip-form" action="https://formsubmit.co/ayyjayy.genki@gmail.com" method="POST" class="hidden">
    <input type="text" name="_honey" tabindex="-1" autocomplete="off" />
    <input type="hidden" name="_subject" value="New order request (test)" />
    <input type="hidden" name="_template" value="table" />
    <input type="hidden" name="_captcha" value="false" />
    <input type="hidden" name="_next" />
    <input type="hidden" name="total" />
    <input type="hidden" name="name" />
    <input type="hidden" name="email" />
    <input type="hidden" name="address" />
    <input type="hidden" name="address_line1" />
    <input type="hidden" name="address_line2" />
    <input type="hidden" name="city" />
    <input type="hidden" name="state" />
    <input type="hidden" name="zip" />
    <input type="hidden" name="items" />
    <input type="hidden" name="cancel_code" />
    <input type="hidden" name="cancel_window_hours" />
  </form>
 
  <script>
  // ------- Minimal Cart Module (localStorage) -------
  (function(){
   const SQUARE_APP_ID = 'REPLACE_WITH_YOUR_SQUARE_APP_ID';
   const SQUARE_LOCATION_ID = 'REPLACE_WITH_YOUR_SQUARE_LOCATION_ID';

   const STORAGE_KEY = 'genki_cart_v1';
   const state = { items: [] }; // {id, title, priceCents, qty, color, size, image}
   let squarePayments = null;
   let squareCard = null;
   const $ = sel => document.querySelector(sel);
   const $$ = sel => Array.from(document.querySelectorAll(sel));

   const isTestMode = () =>
    !SQUARE_APP_ID ||
    SQUARE_APP_ID.startsWith('REPLACE') ||
    !SQUARE_LOCATION_ID ||
    SQUARE_LOCATION_ID.startsWith('REPLACE');

   const CANCEL_WINDOW_HOURS = 12;

   function money(cents){ return `$${(cents/100).toFixed(2)}`; }
   function generateCancelCode(){
    return String(Math.floor(10000000 + Math.random() * 90000000));
   }
   function setCancelDetails(code){
    const codeEl = document.getElementById('checkout-cancel-code');
    const windowEl = document.getElementById('checkout-cancel-window');
    if(codeEl) codeEl.textContent = code || '—';
    if(windowEl) windowEl.textContent = String(CANCEL_WINDOW_HOURS);
   }
   function parsePriceToCents(text){
    if(!text) return 0; const n = parseFloat(text.replace(/[^0-9.]/g,'')); return Math.round(n*100);
   }
   function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state.items)); }
   function load(){ try{ state.items = JSON.parse(localStorage.getItem(STORAGE_KEY))||[]; }catch(e){ state.items=[]; } }

   function add(item){
    const key = `${item.id}|${item.color||''}|${item.size||''}`;
    const existing = state.items.find(x => `${x.id}|${x.color||''}|${x.size||''}` === key);
    if(existing){ existing.qty += item.qty||1; }
    else { state.items.push(Object.assign({qty:1}, item)); }
    save(); render();
   }
   function remove(index){ state.items.splice(index,1); save(); render(); }
   function updateQty(index, delta){ const it = state.items[index]; if(!it) return; it.qty = Math.max(1, it.qty+delta); save(); render(); }
   function subtotal(){ return state.items.reduce((s,it)=> s + it.priceCents * it.qty, 0); }
   function buildOrderSlipText({ amount, buyer, items, cancelCode, cancelWindowHours }){
    const lines = [];
    lines.push(`New order request`);
    lines.push(`Total: ${money(amount)}`);
    if(cancelCode){
     lines.push(`Cancel Code: ${cancelCode}`);
     if(cancelWindowHours){ lines.push(`Cancel Window: ${cancelWindowHours} hours`); }
    }
    lines.push('');
    lines.push('Customer:');
    lines.push(`Name: ${buyer?.name || ''}`);
    lines.push(`Email: ${buyer?.email || ''}`);
    if(buyer?.addressParts){
     lines.push(`Address: ${buyer.addressParts.line1 || ''}`);
     if(buyer.addressParts.line2){ lines.push(`Address 2: ${buyer.addressParts.line2}`); }
     lines.push(`City: ${buyer.addressParts.city || ''}`);
     lines.push(`State: ${buyer.addressParts.state || ''}`);
     lines.push(`ZIP: ${buyer.addressParts.zip || ''}`);
    }else{
     lines.push(`Address: ${buyer?.address || ''}`);
    }
    lines.push('');
    lines.push('Items:');
    (items || []).forEach((it) => {
     const title = it.title || it.id || 'Item';
     const color = it.color ? ` / ${it.color}` : '';
     const size = it.size ? ` / ${it.size}` : '';
     lines.push(`- ${title}${color}${size} x${it.qty || 1} (${money(it.priceCents)})`);
    });
    return lines.join('\n');
   }
   function submitOrderSlipForm(payload){
    const form = document.getElementById('order-slip-form');
    if(!form) return;
    const setValue = (name, value) => {
     const input = form.querySelector(`input[name="${name}"]`);
     if(input) input.value = value || '';
    };
    const nextUrl = `${window.location.origin}${window.location.pathname}#checkout-success`;
    setValue('_next', nextUrl);
    setValue('total', money(payload.amount));
    setValue('name', payload.buyer?.name || '');
    setValue('email', payload.buyer?.email || '');
    setValue('address', payload.buyer?.address || '');
    setValue('address_line1', payload.buyer?.addressParts?.line1 || '');
    setValue('address_line2', payload.buyer?.addressParts?.line2 || '');
    setValue('city', payload.buyer?.addressParts?.city || '');
    setValue('state', payload.buyer?.addressParts?.state || '');
    setValue('zip', payload.buyer?.addressParts?.zip || '');
    setValue('items', buildOrderSlipText(payload));
    setValue('cancel_code', payload.cancelCode || '');
    setValue('cancel_window_hours', payload.cancelWindowHours ? String(payload.cancelWindowHours) : '');
    form.submit();
   }

   function render(){
    const list = $('#cart-items');
    const sub = $('#cart-subtotal');
    const badge = $('#cart-count');
    const checkoutBtn = $('#checkout-btn');
    if(list){
     list.innerHTML = '';
     if(!state.items.length){
      const empty = document.createElement('p');
      empty.className = 'text-sm text-gray-400';
      empty.textContent = 'Your cart is empty.';
      list.appendChild(empty);
     }else{
      state.items.forEach((it, i)=>{
       const row = document.createElement('div'); row.className='cart-line';
       row.innerHTML = `
        <img src="${it.image||'https://placehold.co/120x120'}" alt="${it.title}" class="w-16 h-16 object-cover border border-white/10"/>
        <div>
         <div class="font-semibold">${it.title}</div>
         <div class="text-xs text-gray-400">${it.color||''} ${it.size? '/ '+it.size:''} </div>
         <div class="mt-2 inline-flex items-center space-x-2">
          <button class="qty-btn" data-idx="${i}" data-delta="-1">-</button>
          <span>${it.qty}</span>
          <button class="qty-btn" data-idx="${i}" data-delta="1">+</button>
         </div>
        </div>
        <div class="text-right">
         <div class="price-sm">${money(it.priceCents)}</div>
         <button class="mt-6 text-xs text-gray-400 hover:text-white" data-remove="${i}">Remove</button>
        </div>`;
       list.appendChild(row);
      });
     }
    }
    if(sub){ sub.textContent = money(subtotal()); }
    const count = state.items.reduce((n,it)=>n+it.qty,0);
    if(badge){ badge.textContent = count; }
    if(checkoutBtn){
     checkoutBtn.disabled = !state.items.length;
     checkoutBtn.classList.toggle('opacity-50', !state.items.length);
     checkoutBtn.classList.toggle('cursor-not-allowed', !state.items.length);
    }
   }

   function nudgeCartIcon(){
    const toggle = $('#cart-toggle');
    if(!toggle) return;
    toggle.classList.remove('cart-attention');
    void toggle.offsetWidth;
    toggle.classList.add('cart-attention');
   }

   function goToCheckout(){ window.location.hash = '#checkout'; }

   function wireBasics(){
    const toggle = $('#cart-toggle');
    if(toggle) toggle.addEventListener('click', () => { nudgeCartIcon(); goToCheckout(); });
    const list = $('#cart-items');
    if(list){
     list.addEventListener('click', (e)=>{
      const btn = e.target.closest('button'); if(!btn) return;
      if(btn.dataset.idx && btn.dataset.delta){ updateQty(parseInt(btn.dataset.idx,10), parseInt(btn.dataset.delta,10)); }
      if(btn.dataset.remove){ remove(parseInt(btn.dataset.remove,10)); }
     });
    }
    const checkoutBtn = $("#checkout-btn");
    const squarePay = document.getElementById("square-pay");
    const squarePayLater = document.getElementById("square-pay-later");
    const sqNameInput = document.getElementById("sq-name");
    const sqEmailInput = document.getElementById("sq-email");
    const sqAddressInput = document.getElementById("sq-address");
    const sqAddress2Input = document.getElementById("sq-address-2");
    const sqCityInput = document.getElementById("sq-city");
    const sqStateInput = document.getElementById("sq-state");
    const sqZipInput = document.getElementById("sq-zip");
    const squareError = document.getElementById("square-error");
    const squareCardContainer = document.getElementById("square-card-container");
    const squareTestNote = document.getElementById("square-test-note");

    const setSquareError = (msg='') => {
     if(!squareError) return;
     squareError.textContent = msg;
     squareError.classList.toggle('hidden', !msg);
    };

    const waitForSquare = (timeoutMs = 4000) =>
     new Promise((resolve, reject) => {
      const start = Date.now();
      const tick = () => {
       if(window.Square) return resolve();
       if(Date.now() - start >= timeoutMs) return reject(new Error('Square.js not loaded.'));
       setTimeout(tick, 100);
      };
      tick();
     });

    const prepareSquareUi = async () => {
     squareCardContainer?.classList.remove('hidden');
     squareTestNote?.classList.toggle('hidden', !isTestMode());
     if(!isTestMode()){
      try{
       await waitForSquare();
       await ensureSquareCard();
      }catch(err){
       setSquareError(err.message || 'Unable to load card fields.');
      }
     }
    };

    const ensureSquareCard = async () => {
     if(squareCard) return;
     if(!window.Square){
      throw new Error('Square.js not loaded. Ensure the Square script is included.');
     }
     if(isTestMode()){
      throw new Error('Square app/location IDs are not configured.');
     }
     squarePayments = Square.payments(SQUARE_APP_ID, SQUARE_LOCATION_ID);
     squareCard = await squarePayments.card();
     await squareCard.attach('#square-card-container');
    };

    const buildPayload = () => {
     const name = sqNameInput?.value.trim() || '';
     const email = sqEmailInput?.value.trim() || '';
     const address1 = sqAddressInput?.value.trim() || '';
     const address2 = sqAddress2Input?.value.trim() || '';
     const city = sqCityInput?.value.trim() || '';
     const state = sqStateInput?.value.trim() || '';
     const zip = sqZipInput?.value.trim() || '';
     const addressBits = [address1, address2, city, state, zip].filter(Boolean);
     const address = addressBits.join(', ');
     const cancelCode = generateCancelCode();
     return {
      name,
      email,
      address1,
      address,
      cancelCode,
      addressParts: { line1: address1, line2: address2, city, state, zip }
     };
    };

    const handleSquarePay = async () => {
     setSquareError('');
     if(isTestMode()){
      setSquareError('Pay Now is disabled until Square is configured.');
      return;
     }
     const { name, email, address1, address, cancelCode, addressParts } = buildPayload();
     if (!state.items.length){
      setSquareError('Your cart is empty.');
      return;
     }
     if(!name || !email || !address1 || !addressParts.city || !addressParts.state || !addressParts.zip){
      setSquareError('Please add your name, email, and full shipping address.');
      return;
     }
     if(squarePay){ squarePay.disabled = true; squarePay.textContent = 'Processing...'; }
     try{
      const payload = {
       amount: subtotal(),
       buyer: { name, email, address, addressParts },
       items: state.items,
       cancelCode,
       cancelWindowHours: CANCEL_WINDOW_HOURS
      };
      let resp;
      if(isTestMode()){
       submitOrderSlipForm(payload);
       state.items = [];
       save(); render();
       setCancelDetails(cancelCode);
       window.location.hash = '#checkout-success';
       return;
      }else{
       await ensureSquareCard();
       const tokenResult = await squareCard.tokenize();
       if(tokenResult.status !== 'OK'){
        throw new Error(tokenResult.errors?.[0]?.message || 'Card could not be processed.');
       }
       resp = await fetch('/.netlify/functions/square-payment', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ ...payload, sourceId: tokenResult.token })
       });
      }
      const data = await resp.json().catch(() => ({}));
      if(!resp.ok || !data.success){
       const fallback = isTestMode()
        ? 'Unable to submit your request. Please try again.'
        : 'Payment failed. Please try again.';
       throw new Error(data.error || fallback);
      }
      const successTitle = document.getElementById('checkout-success-title');
      const successCopy = document.getElementById('checkout-success-copy');
      if(isTestMode()){
       if(successTitle) successTitle.textContent = 'Thanks for your interest';
       if(successCopy) successCopy.textContent = "We got your request. We'll reach out if anything is needed.";
      }else{
       if(successTitle) successTitle.textContent = 'Order received';
       if(successCopy) successCopy.textContent = "We'll process your order shortly. Check your email for the receipt.";
      }
      setCancelDetails(cancelCode);
      state.items = [];
      save(); render();
      window.location.hash = '#checkout-success';
     }catch(err){
      setSquareError(err.message || 'Payment failed.');
     }finally{
      if(squarePay){ squarePay.disabled = false; squarePay.textContent = 'Pay Now'; }
     }
    };

    const handlePayLater = () => {
     setSquareError('');
     const { name, email, address1, address, cancelCode, addressParts } = buildPayload();
     if (!state.items.length){
      setSquareError('Your cart is empty.');
      return;
     }
     if(!name || !email || !address1 || !addressParts.city || !addressParts.state || !addressParts.zip){
      setSquareError('Please add your name, email, and full shipping address.');
      return;
     }
     const payload = {
      amount: subtotal(),
      buyer: { name, email, address, addressParts },
      items: state.items,
      cancelCode,
      cancelWindowHours: CANCEL_WINDOW_HOURS
     };
     submitOrderSlipForm(payload);
     const successTitle = document.getElementById('checkout-success-title');
     const successCopy = document.getElementById('checkout-success-copy');
     if(successTitle) successTitle.textContent = 'Order received';
     if(successCopy) successCopy.textContent = 'We got your order request. Payment is pending.';
     setCancelDetails(cancelCode);
     state.items = [];
     save(); render();
     window.location.hash = '#checkout-success';
    };

    if(checkoutBtn){
     checkoutBtn.addEventListener('click', () => {
      if (!state.items.length){
       alert('Your cart is empty.');
       return;
      }
      const form = document.getElementById('checkout-form');
      form?.scrollIntoView({ behavior: 'smooth', block: 'start' });
      sqNameInput?.focus();
     });
    }
    prepareSquareUi();
    squarePay?.addEventListener('click', handleSquarePay);
    squarePayLater?.addEventListener('click', handlePayLater);
   }
   // No quick-add buttons for New Arrivals; cards already link to product pages.
   function enhanceNewArrivals(){}

   // Public API if needed elsewhere
   window.Cart = { add, remove, updateQty, open: nudgeCartIcon, goToCheckout };

   load();
   wireBasics();
   render();

   if(isTestMode() && window.location.hash === '#checkout-success'){
    const successTitle = document.getElementById('checkout-success-title');
    const successCopy = document.getElementById('checkout-success-copy');
    if(successTitle) successTitle.textContent = 'Thanks for your interest';
    if(successCopy) successCopy.textContent = "We got your request. We'll reach out if anything is needed.";
   }
  })();
  </script>

  <!-- --- END MAIN CONTENT --- -->

  <!-- FOOTER - FULL WIDTH -->
  <footer class="bg-black border-t border-white/10 mt-12 py-10">
    <div class="w-full px-4 sm:px-6 lg:px-8 text-center text-gray-400">
      <p class="text-xl font-bold tracking-widest mb-4">GENKI</p>
      <div class="flex justify-center space-x-6 text-sm mb-6">
        <!-- Footer links are now functional -->
        <a href="#shop" class="hover:text-white transition">Shop</a>
        <a href="#about" class="hover:text-white transition">About</a>
        <a href="#collabs" class="hover:text-white transition">Collabs</a>
        <a href="#contact" class="hover:text-white transition">Contact</a>
      </div>
      <p class="text-xs">&copy; 2023 GENKI Streetwear. All rights reserved.</p>
    </div>
  </footer>


  <script>
    // --- JAVASCRIPT FOR DYNAMIC BEHAVIOR ---

    // 1. Centralized Product Data (Updated to be a single source of truth)
    const PRODUCTS = [
      // --- NEW PRODUCT: ACD Unfinished Organic Sweatshirt ---
      {
        id: 'acd-organic-sweatshirt',
        title: "ACD Unfinished Organic Sweatshirt",
        price: "$40.00 ",
        badge: 'ACD Sketch',
        categories: 'Tops',
        keywords: 'sweatshirt Unfinished organic casual sketch artwork ali can\'t draw',
        sizes: ['S', 'M', 'L', 'XL', '2XL'],
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712698-5.png', 
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712698-2.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712698-1.png',
        ],
        colors: [
          { name: 'Black', color: 'bg-black',
            images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712698-5.png', 
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712698-2.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712698-1.png',
        ],
           },
          { name: 'Grey', color: 'bg-gray-500',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712713-5.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712713-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712713-1.png'
            ]
           },
          { name: 'Blue', color: 'bg-blue-600',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712728-5.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712728-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712728-1.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712728-0.png'
            ]
           },
          { name: 'Green', color: 'bg-green-700',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712703-5.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712703-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712703-1.png'
            ]
           },
          { name: 'Brown', color: 'bg-brand-charcoal',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712708-5.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712708-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509461712708-1.png'
            ]
           }
        ],
        details: [
          'Organic cotton material for sustainability.',
          'Unfinished fit, suitable for all.',
          'Features the "Ali Can\'t Draw" Sketch #014 graphic.',
          'Ribbed cuffs and hem.'
        ]
        
      },


      // --- NEW PRODUCT: Genki Rainman Heavy T-shirt ---
      {
        id: 'genki-rainman-heavy-shirt',
        title: "Genki Rainman Heavy T-shirt",
        price: "$30.00 ",
        badge: '',
        categories: 'Tops',
        keywords: 'tshirt Unfinished heavy kanji loud artwork ali can\'t draw',
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337217700-1.png', 
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337217700-2.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337217700-0.png',
        ],
        colors: [
          { name: 'Black', color: 'bg-black',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337215114-1.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337215114-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337215114-0.png'
            ]
           },
          { name: 'Moss', color: 'bg-brand-Moss',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337217700-1.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337217700-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337217700-0.png'
            ]
           },
          { name: 'Navy', color: 'bg-slate-800',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337215181-1.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337215181-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337215181-0.png'
            ]
           },
          { name: 'Graphite', color: 'bg-neutral-700' ,
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337221264-3.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337221264-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337221264-0.png'
            ]
          },
          { name: 'Watermelon', color: 'bg-rose-400',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337215191-1.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337215191-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602337215191-0.png'
            ]
           },
        ],
        details: [
          'Organic cotton material for sustainability.',
          'Unfinished fit, suitable for all.',
          'Features the "Ali Can\'t Draw" Sketch #014 graphic.',
          'Ribbed cuffs and hem.'
        ]
        
      },

      // --- NEW PRODUCT: Genki Sport Fitted T-shirt ---
      {
        id: 'genki-sport-fitted-tee',
        title: 'Genki Sport Fitted T-shirt',
        price: '$30.00 ',
        badge: 'SPORT',
        categories: 'Tops',
        keywords: 'fitted t-shirt sport breathable lightweight comfortable genki',
        sizes: ['S', 'M', 'L', 'XL', '2XL†', '3XL†'],
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349048674886-0.png', 
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349048674886-2.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349048674886-1.png',
        ],
        colors: [
          { name: 'Navy', color: 'bg-brand-navy',
            images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349048674886-0.png', 
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349048674886-2.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349048674886-1.png',
        ],
           },
          { name: 'Black', color: 'bg-black',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349048674865-0.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349048674865-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349048674865-1.png'
            ]
           },
          { name: 'Pink', color: 'bg-red-300',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173490486713571-0.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173490486713571-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173490486713571-1.png'
            ]
           }
        ],
        details: [
          'Lightweight and breathable fabric for active wear.',
          'Fitted cut for a sleek look.',
          'Features the GENKI Sport logo on the chest.'
        ]
      },

      // --- NEW PRODUCT: Genki Sport Fleece Joggers ---
      {
        id: 'genki-sport-fleece-joggers',
        title: 'Genki Sport Fleece Joggers',
        price: '$45.00 ',
        badge: 'SPORT',
        categories: 'Bottoms',
        keywords: 'fleece joggers sport comfortable warm genki activewear',
        sizes: ['XS', 'S', 'M', 'L', 'XL', '2XL†'],
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613839-0.png', 
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613839-1.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613839-3.png',
        ],
        colors: [
          { name: 'Black', color: 'bg-black',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526611265-0.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526611265-1.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526611265-3.png'
            ]
           },
          { name: 'Maroon', color: 'bg-brand-maroon' },
          { name: 'Rose', color: 'bg-brand-dusty',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613833-0.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613833-1.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613833-3.png'
            ]
           },
          { name: 'Fatigue Green', color: 'bg-brand-fatigue',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613845-0.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613845-1.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613845-3.png'
            ]
           },
          { name: 'Navy', color: 'bg-brand-navy',
            images: [
            'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613851-0.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613851-1.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602526613851-3.png'
          ] }
          
        ],
        details: [
          'Soft fleece material for warmth and comfort.',
          'Elastic waistband with drawstring for adjustable fit.',
          'Features the GENKI logo on the thigh.'
        ]
      },

      // --- NEW PRODUCT: ACD 4 AM Vibes Heavy Tee ---
      {
        id: 'acd-4am-vibes-tee',
        title: 'ACD 4 AM Vibes Heavy Tee',
        price: '$45.00 ',
        badge: 'ACD Sketch',
        categories: 'Tops',
        keywords: 'heavy tee 4 am vibes acd sketch comfortable durable artwork ali can\'t draw',
        size: ['XS','S', 'M', 'L', 'XL', '2XL†'],
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17653149238850-4.png', 
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17653149238850-1.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17653149238850-3.png',
        ],
        colors: [
        ],
        details: [
          'Heavyweight fabric for durability.',
          'Relaxed fit for comfort.',
          'Features the "4 AM Vibes" ACD Sketch graphic.'
        ],
      },

      // --- NEW PRODUCT: ACD Neko Pastel Baseball Cap ---
      {
        id: 'acd-neko-pastel-cap',
        title: 'ACD Neko Pastel Baseball Cap',
        price: '$30.00 ',
        badge: 'ACD Sketch',
        categories: 'Accessories',
        keywords: 'cap pastel neko baseball adjustable lightweight japanese cat hat artwork ali can\'t draw',
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212418-2.png', 
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212418-0.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212418-3.png',
        ],
        colors: [
          { name: 'Pastel Pink', color: 'bg-pink-50' },
          { name: 'Pastel Lemon', color: 'bg-yellow-50',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212416-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212416-0.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212416-3.png'
            ]
           },
          { name: 'Pastel Mint', color: 'bg-green-50',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212417-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212417-0.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212417-3.png'
            ]
           },
          { name: 'Pastel Blue', color: 'bg-blue-50',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212415-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212415-0.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176509539212415-3.png'
            ]
           }
        ],
        details: [
          'Adjustable fit ensures comfort.',
          'Soft pastel color tones for a lighter aesthetic.',
          'Features the Japanese Neko (Cat) graphic.'
        ]
      },
      
      // --- NEW PRODUCT: GENKI Tour Beanie [ON HOLD FOR NEXT DROP]
      /*
      {
        id: 'genki-tour-beanie',
        title: 'GENKI Tour Beanie',
        price: '$25.00 ',
        badge: 'Tour',
        categories: 'Accessories',
        keywords: 'beanie tour genki warm comfortable winter knit hat',
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173545228912882-0.png', // New Image
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17548682826350-2.png',
        ],
        colors: [
          { name: 'Black', color: 'bg-black' },
          { name: 'Grey', color: 'bg-gray-500' },
          { name: 'Navy', color: 'bg-blue-900' }
        ],
        location: [
          {  name: 'New York'},
          {  name: 'Texas'},
          {  name: 'Amsterdam' }
        ],
        details: [
          'Warm and comfortable knit material.',
          'Features embroidered GENKI Tour logo.',
          'One size fits most.'
        ]
      },
{
        id: 'genki-tour-hoodie',
        title: 'GENKI Tour Hoodie',
        price: '$45.00 ',
        badge: 'Tour',
        categories: 'Tops',
        keywords: 'hoodie tour genki warm comfortable winter knit',
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173411370411486-0.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173411370411486-2.png',
        ],
        colors: [
          { name: 'Red', color: 'bg-maroon-100' },
          { name: 'Grey', color: 'bg-gray-500' },
          { name: 'Navy', color: 'bg-blue-900' }
        ],        details: [
          'Warm and comfortable knit material.',
          'Features embroidered GENKI Tour logo.'
        ]
      }

       */

      // --- NEW PRODUCT: GENKI Make America Genki Again Electric Blue Snapback ---
      {
        id: 'genki-america-snapback',
        title: 'Make America Genki Again Electric Blue Snapback',
        price: '$30.00 ',
        badge: '',
        categories: 'Accessories',
        keywords: 'snapback electric blue genki cap maga political parody hat',
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17617999204796-0.png', // New Image
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17617999204796-3.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17617999204796-6.png',
        ],
        colors: [
          { name: 'Electric Blue', color: 'bg-blue-400' },
        ],
        details: [
          'Vibrant electric blue brim and accents.',
          'Classic snapback style with adjustable closure.',
          'Features bold Genki statement branding.'
        ]
      },
      // --- NEW PRODUCT: Genki Sakura Heavy Hoodie ---
      {
        id: 'genki-sakura-hoodie',
        title: 'Genki Sakura Heavy Hoodie',
        price: '$40.00 ',
        badge: '',
        categories: 'Tops',
        keywords: 'hoodie heavy sakura genki thick warm comfortable japanese flower',
        sizes: ['S', 'M', 'L', 'XL', '2XL†', '3XL†', '4XL†', '5XL†'],
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17658626415530-0.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17658626415530-1.png',
        ],
        colors: [
        { name: 'Black', color: 'bg-black', images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17658626415530-0.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17658626415530-1.png',
        ] },
        { name: 'Pink', color: 'bg-pink-200', images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176586264110849-0.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176586264110849-1.png'
        ]},   // Changed from 600 to 200
        { name: 'Maroon', color: 'bg-red-950', images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17658626415586-0.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17658626415586-1.png'
        ] },  // Darker, deep maroon
        { name: 'Forest Green', color: 'bg-emerald-950', images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176586264120570-0.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176586264120570-1.png'
        ] }, // Very dark green
        { name: 'Blue', color: 'bg-blue-300', images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176586264121635-0.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176586264121635-1.png'
        ] }   // Changed from 800 to 300
        ],
        details: [
          'Thick, heavyweight material for maximum warmth.',
          'Unique minimalist embroidered Sakura logo.',
          'Comfortable and durable.'
        ]
      },
     
      
      // --- NEW PRODUCT: Genki Sakura Heavy Hoodie ---
      {
        id: 'genki-skull-hoodie',
        title: 'Genki Skull Hoodie',
        price: '$40.00 ',
        badge: '',
        categories: 'Tops',
        keywords: 'hoodie heavy skull genki thick warm comfortable japanese flower',
        sizes: ['S', 'M', 'L', 'XL', '2XL†', '3XL†', '4XL†', '5XL†'],
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173449331512997-0.png', // New Image
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173449331512997-2.png',
        ],
        skullOptions: [
          {
            name: 'Black Skull',
            color: 'bg-black',
            hoodies: [
              { name: 'Sand', color: 'bg-yellow-100', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173449331512997-0.png'] },
              { name: 'Ash', color: 'bg-neutral-100', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173449331520544-0.png'] },
              { name: 'White', color: 'bg-white', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17344933155522-0.png'] },
              { name: 'Pink', color: 'bg-pink-200', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173449331510849-0.png'] },
              { name: 'Light Blue', color: 'bg-blue-200', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173449331510841-0.png'] }
            ]
          },
          {
            name: 'Red Skull',
            color: 'bg-red-800',
            hoodies: [
              {name: 'Black', color: 'bg-black', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349980575530-0.png'] },
              {name: 'Maroon', color: 'bg-red-950', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349980575586-0.png'] },
              { name: 'Sand', color: 'bg-yellow-100', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173499805712997-0.png'] },
              { name: 'Grey', color: 'bg-gray-200', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349980575610-0.png'] },
              { name: 'Ash', color: 'bg-neutral-100', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173499805720544-0.png'] }
            ]
          },
          {
            name: 'White Skull',
            color: 'bg-white',
            hoodies: [
              {name: 'Black', color: 'bg-black', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349986875530-0.png'] },
              {name: 'Maroon', color: 'bg-red-950', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349986875586-0.png'] },
              {name: 'Chocolate', color: 'bg-yellow-950', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349986875554-0.png'] },
              {name: 'Navy', color: 'bg-brand-navy', images: ['https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17349986875594-0.png'] },
            ]
          },
          
          
        ],
        details: [
          'Thick, heavyweight material for maximum warmth.',
          'Unique minimalist embroidered Sakura logo.',
          'Comfortable and durable.'
        ]
      },
      // --- NEW PRODUCT: Genki Esquire Packable Jacket ---
      {
        id: 'genki-esquire-jacket',
        title: 'Genki Esquire Packable Jacket',
        price: '$45.00 ',
        badge: '',
        categories: [ 'Tops', 'Outerwear' ],
        keywords: 'jacket packable esquire genki lightweight warm comfortable',
        sizes: ['S', 'M', 'L', 'XL', '2XL†'],
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305211008-2.png', // New Image
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305211008-0.png'
        ],
        colors: [
          { 
          name: 'Black', 
          color: 'bg-black',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305211008-2.png', // New Image
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305211008-0.png'
            ]
          },
          { 
          name: 'Gold', color: 'bg-yellow-600',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305211026-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305211026-0.png'
            ] 
          },
          { name: 'Royal blue', color: 'bg-blue-800', 
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305211744-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305211744-0.png'
            ]
          },
          { name: 'Safety Green', color: 'bg-lime-300', 
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305213435-2.png',
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176681305213435-0.png'
            ]
          },
        ],
        details: [
          'Thick, heavyweight material for maximum warmth.',
          'Unique minimalist embroidered Sakura logo.',
          'Comfortable and durable.'
        ]
      },

      // --- NEW PRODUCT: ACD Kancho Hancho Button Up ---
      { 
        id: 'acd-kancho-hancho-shirt',
        title: 'ACD Kancho Hancho Button Up Shirt',
        price: '$50.00 ',
        badge: 'ACD Sketch',
        categories: 'Tops',
        keywords: 'button-up shirt kancho hancho acd sketch casual lightweight artwork ali can\'t draw',
        sizes: ['S', 'M', 'L', 'XL', '2XL†', '3XL†', '4XL†', '5XL†', '6XL†'],
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176586211717117-1.png', 
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176586211717117-0.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-176586211717117-13.png',
        ],
        
        details: [
          'Lightweight and breathable fabric for comfort.',
          'Features the "Kancho Hancho" ACD Sketch graphic.',
          'Classic button-up design with a relaxed fit.'
        ]
      },


      // --- EXISTING PRODUCTS ---
      {
        id: 'genki-rainman-tee',
        title: 'Genki Rainman Reverse Graphic Tee',
        price: '$30.00 ',
        badge: '',
        categories: 'Tops',
        keywords: 't-shirt rainman graphic genki reverse',
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-174708690117202-5.png',
        ],
        colors: [
          { name: 'Blue', color: 'bg-blue-700' },
          { name: 'Black', color: 'bg-black' },
          { name: 'Army Green', color: 'bg-green-800' },
          { name: 'Navy', color: 'bg-blue-900' },
          { name: 'Salmon', color: 'bg-orange-400' }
        ],
        details: [
          'Bold graphic print design.',
          'Reverse-style construction for a deconstructed look.'
        ]
      },

      {
        id: 'genki-sakura-duffel-bag',
        title: 'Genki Sakura Duffel Bag',
        price: '$40.00 ',
        badge: '',
        categories: 'Accessories',
        keywords: 'duffel bag sakura genki floral',
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-170094616612021-1.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-170094616612021-3.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-170094616612021-2.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-170094616612021-5.png',
        ],
        colors: [],
        details: [
          'Spacious duffel bag with a floral sakura design.',
          'Durable material for everyday use.',
          'Front zip pocket and adjustable shoulder strap.'
        ]
      },

      {
        id: 'genki-two-faced-hoodie',
        title: 'Genki Two Faced Hoodie',
        price: '$54.00 ',
        badge: '',
        categories: 'Tops',
        keywords: 'hoodie two-faced genki unique design',
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602693618730-12.png',
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-173602693618730-13.png',
        ],
        colors: [ // Assuming black as a default based on streetwear
          { name: 'Black', color: 'bg-black' }
        ],
        details: [
          'Unique two-faced design for high contrast styling.',
          'Mid-weight cotton blend.',
          'Oversized fit.'
        ]
      },
      {
        id: 'genki-shinobi-beanie',
        title: 'Genki Shinobi Beanie',
        price: '$25.00 ',
      badge: '',
        categories: 'Accessories',
        keywords: 'beanie shinobi ninja naruto genki warm comfortable knit hat',
        images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-170122662217496-0.png'
        ],
        colors: [
          { name: 'Black', color: 'bg-black',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17012266228936-0.png'
            ]
           },
          { name: 'Red', color: 'bg-red-700',
            images: [
          'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17012266228939-0.png'
      ]
           },
          { name: 'Blue', color: 'bg-blue-800', },
          { name: 'White', color: 'bg-white',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17012266228938-0.png'
            ]
           },
          { name: 'Navy', color: 'bg-blue-950',
            images: [
              'https://uploads.twitchalerts.com/000/115/629/159/21699478-mockup-17012266228940-0.png'
            ]
           }
          
        ],
        details: [
          'Soft knit material for warmth.',
          'Features the embroidered Shinobi logo.'
        ]
      },

      
      
      

      
    ];
    
    // 2. Hero Text Animation (GENKI <-> 元気)
    // 2. Hero Text Animation (GENKI <-> 元気) — FADE VERSION (keep name morphText)
const heroTitle = document.getElementById('hero-title');
const titles = ["GENKI", "元気"];
let titleIndex = 0;

const animationDuration = 600; // match CSS transition
const pauseDuration = 4000;
let isAnimating = false;

// initial
heroTitle.textContent = titles[titleIndex];
heroTitle.classList.add('is-in');

function morphText() {
 if (isAnimating) return;
 isAnimating = true;

 heroTitle.classList.remove('is-in');
 heroTitle.classList.add('is-out');

 setTimeout(() => {
  titleIndex = (titleIndex + 1) % titles.length;
  heroTitle.textContent = titles[titleIndex];

  heroTitle.classList.remove('is-out');
  heroTitle.classList.add('is-in');

  isAnimating = false;
  setTimeout(morphText, pauseDuration);
 }, animationDuration);
}

// start
setTimeout(morphText, pauseDuration);


    
    // 3. Dynamic Navbar Visibility and Style on Scroll (Smooth compacting)
    const header = document.getElementById('main-header');
    const innerNavDiv = document.getElementById('nav-inner');
    const logoContainer = document.getElementById('logo-container');
    const homeLink = document.getElementById('home-link'); // Added reference
    const scrollThreshold = 120; // px where navbar is fully compacted

    let ticking = false;
    function updateNavbar(scrollY) {
      // Check if we are on the home page. If not, this function should be disabled.
      if (window.location.hash !== '' && window.location.hash !== '#home') return; 
      
      const progress = Math.min(1, scrollY / scrollThreshold);

      // background fades in from transparent to near-opaque
      header.style.backgroundColor = `rgba(0,0,0,${(progress * 0.9).toFixed(2)})`;
      header.style.backdropFilter = `blur(${(progress * 6).toFixed(1)}px)`;

      // compact: reduce vertical padding from 24px -> ~12px
      const startPad = 24; // px (py-6 approx)
      const endPad = 10; // px when compact
      const pad = startPad - (startPad - endPad) * progress;
      innerNavDiv.style.padding = `${pad.toFixed(1)}px .3rem`;

      // logo becomes visible as we scroll (0 at top -> 1 when compacted)
      logoContainer.style.opacity = progress.toFixed(2);
      
      // CRITICAL FIX: Logo clickability. Only unclickable when hidden (i.e., progress is near zero)
      if (progress < 0.1) {
        homeLink.style.pointerEvents = 'none'; // Unclickable when hidden
      } else {
        homeLink.style.pointerEvents = 'auto'; // Clickable once visible/faded in
      }
    }

    function onScroll() {
      if (ticking) return;
      ticking = true;
      requestAnimationFrame(() => {
        updateNavbar(window.scrollY);
        ticking = false;
      });
    }
    
    // 4. Client-Side Search Functionality (Refactored)
    const searchInput = document.getElementById('header-search-input');
    const searchInputContainer = document.getElementById('search-input-container');
    const searchToggleButton = document.getElementById('search-toggle-button');

    /**
     * Toggles the visibility of the search input field.
     */
    function toggleSearchInput(event) {
      // Stop propagation to prevent document click from immediately closing it
      if (event) event.stopPropagation();
      
      searchInputContainer.classList.toggle('active');

      if (searchInputContainer.classList.contains('active')) {
        // If opening, focus the input field immediately
        searchInput.focus();
        // Add event listener to close if user clicks outside of the search area
        document.addEventListener('click', closeSearchOnDocumentClick);
      } else {
        // If closing, remove the listener
        document.removeEventListener('click', closeSearchOnDocumentClick);
      }
    }
    
    /**
     * Closes the search input if the click occurs outside the toggle and input area.
     */
    function closeSearchOnDocumentClick(event) {
      // Check if the click target is outside the container and the toggle button
      const isOutside = !searchInputContainer.contains(event.target) && !searchToggleButton.contains(event.target);

      if (searchInputContainer.classList.contains('active') && isOutside) {
        searchInputContainer.classList.remove('active');
        document.removeEventListener('click', closeSearchOnDocumentClick);
      }
    }

    /**
     * Routes to the shop page and filters products based on the current search query.
     */
    function performSearchAndRoute() {
      const query = searchInput.value.trim();
      // Close the search bar after the user commits the search
      searchInputContainer.classList.remove('active');

      if (query) {
        // Route to shop page and pass the query as a parameter
        window.location.hash = `#shop?q=${encodeURIComponent(query)}`;
      } else {
        // If query is empty, just route to the clean shop page
        window.location.hash = `#shop`;
      }
    }
    
    // Add listener for Enter key on the input field
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault(); // Prevent default form submission if any
        performSearchAndRoute();
      }
    });


    /**
     * Renders the product grid on the shop page based on the provided list of products.
     * @param {Array<Object>} productsToRender - The array of products to display.
     * @param {string} title - The title for the shop page.
     */
    function renderShopGrid(productsToRender, title = "ALL PRODUCTS") {
      const gridContainer = document.getElementById('shop-product-grid');
      const shopTitle = document.getElementById('shop-title');

      if (!gridContainer || !shopTitle) return;

      shopTitle.textContent = title;
      gridContainer.innerHTML = '';
      
      if (productsToRender.length === 0) {
        gridContainer.innerHTML = '<p class="col-span-full text-gray-400 text-center py-10 text-xl">No products found matching your criteria.</p>';
        return;
      }
      productsToRender.forEach(product => {
        const colors = Array.isArray(product.colors) ? product.colors : [];
        // Create product card HTML structure
        const card = document.createElement('div');
        card.className = "bg-transparent overflow-hidden shadow-lg border border-white/10 cursor-pointer hover:border-white transition";
        card.onclick = () => { window.location.hash=`#${product.id}`; };
        
        // Determine the main color for the card preview
        const firstColor = colors.length > 0 ? colors[0] : { name: 'Black', color: 'bg-black' };

        const cardHtml = `
          <div class="relative overflow-hidden">
            <img src="${product.images[0]}" alt="${product.title}" class="w-full max-h-80 aspect-[4/5] object-cover" style="width:100%; height:auto;">
            ${product.badge ? `<span class="absolute top-3 right-3 bg-blue-900 text-white text-xs px-2 py-1 font-medium">${product.badge}</span>` : ''}
          </div>
          <div class="p-4">
            <h3 class="font-semibold text-white mb-1">${product.title}</h3>
            <p class="text-sm text-gray-400">${product.price}</p>
            <!-- Render first available color as a dot -->
            <div class="flex justify-start space-x-2 mt-2">
              <div class="w-3 h-3 ${firstColor.color} border border-white/50" title="${firstColor.name}"></div>
              ${colors.length > 1 ? '<span class="text-xs text-gray-500"> + ' + (colors.length - 1) + ' colors</span>' : ''}
            </div>
          </div>
        `;
        card.innerHTML = cardHtml;
        gridContainer.appendChild(card);
        
      });
    }
    
    // 5. Product Detail Logic
    function getProductDetails(id) {
      return PRODUCTS.find(p => p.id === id);
    }

    function renderProduct(key) {
      const data = getProductDetails(key);
      if (!data) return; // no-op if unknown

      const fallbackImages = data.images || [];
      const getImagesForColor = (colorObj) => {
        if (!colorObj) return fallbackImages;
        if (Array.isArray(colorObj.images) && colorObj.images.length) return colorObj.images;
        if (colorObj.image) return [colorObj.image];
        return fallbackImages;
      };

      const titleEl = document.getElementById('product-title');
      const priceEl = document.getElementById('product-price');
      const mainImg = document.getElementById('product-main-image');
      const thumbs = document.getElementById('product-thumbs');
      const badge = document.getElementById('product-badge');
      const hoodieColorsContainer = document.getElementById('product-hoodie-colors');
      const skullColorsContainer = document.getElementById('product-skull-colors');
      const hoodieName = document.getElementById('product-hoodie-name');
      const skullName = document.getElementById('product-skull-name');
      const hoodieBlock = document.getElementById('product-hoodie-block');
      const skullBlock = document.getElementById('product-skull-block');
      const sizeBlock = document.getElementById('product-size-block');
      const sizeName = document.getElementById('product-size-name');
      const sizesContainer = document.getElementById('product-sizes');
      const detailsList = document.getElementById('product-details-list');
      const mainImgWrapper = mainImg.parentElement;

      const ensureBackprintBadge = () => {
        const existing = mainImgWrapper.querySelector('.backprint-badge');
        if (data.id === 'acd-organic-sweatshirt') {
          mainImgWrapper.classList.add('relative');
          if (!existing) {
            const badgeEl = document.createElement('span');
            badgeEl.className = 'backprint-badge absolute bottom-2 left-2 px-2 py-1 bg-black/70 text-[11px] uppercase tracking-[0.25em] text-white border border-white/10';
            badgeEl.textContent = 'Back print shown';
            mainImgWrapper.appendChild(badgeEl);
          }
        } else {
          if (existing) existing.remove();
          mainImgWrapper.classList.remove('relative');
        }
      };

      titleEl.textContent = data.title;
      priceEl.textContent = data.price;
      badge.textContent = data.badge || '';
      badge.style.display = data.badge ? 'inline-block' : 'none'; // Hide badge if empty

      // Gallery renderer that honors color-specific image sets
      const renderGallery = (images) => {
        const galleryImages = (images && images.length) ? images : fallbackImages;
        if (galleryImages.length) {
          mainImg.src = galleryImages[0];
          ensureBackprintBadge();
        }

        thumbs.innerHTML = '';
        galleryImages.slice(0, 3).forEach((src, i) => {
          const img = document.createElement('img');
          img.src = src;
          img.alt = `${data.title} ${i + 1}`;
          img.className = 'product-thumb w-full h-24 object-cover rounded border border-white/10 cursor-pointer hover:opacity-80 transition';
          img.dataset.index = i;
          if (i === 0) img.classList.add('border-white', 'border-2');
          img.addEventListener('click', () => {
            mainImg.src = src;
            thumbs.querySelectorAll('.product-thumb').forEach(t => t.classList.remove('border-white', 'border-2'));
            img.classList.add('border-white', 'border-2');
            ensureBackprintBadge();
          });
          thumbs.appendChild(img);
        });
      };

      // Colors (supports single-color products and skull dual selector)
      hoodieColorsContainer.innerHTML = '';
      skullColorsContainer.innerHTML = '';
      hoodieBlock.style.display = 'block';
      skullBlock.style.display = 'none';

      if (data.skullOptions && data.skullOptions.length) {
        let activeSkull = 0;
        let activeHoodie = 0;

        const getImagesForCombo = () => {
          const skull = data.skullOptions[activeSkull] || {};
          const hoodies = skull.hoodies || [];
          const hoodie = hoodies[activeHoodie];
          if (hoodie && Array.isArray(hoodie.images) && hoodie.images.length) return hoodie.images;
          if (hoodie && hoodie.image) return [hoodie.image];
          if (Array.isArray(skull.images) && skull.images.length) return skull.images;
          if (skull.image) return [skull.image];
          return fallbackImages;
        };

        const renderHoodies = () => {
          const skull = data.skullOptions[activeSkull] || { hoodies: [] };
          const hoodies = skull.hoodies || [];
          hoodieColorsContainer.innerHTML = '';
          hoodieBlock.style.display = hoodies.length ? 'block' : 'none';
          hoodieName.textContent = hoodies[activeHoodie] ? hoodies[activeHoodie].name : 'N/A';
          hoodies.forEach((h, i) => {
            const btn = document.createElement('button');
            btn.title = h.name;
            btn.className = `w-8 h-8 ${h.color || 'bg-white'} border-2 border-transparent hover:border-white transition`;
            if (i === activeHoodie) btn.classList.add('border-white');
            btn.addEventListener('click', () => {
              activeHoodie = i;
              hoodieColorsContainer.querySelectorAll('button').forEach(b => b.classList.remove('border-white'));
              btn.classList.add('border-white');
              hoodieName.textContent = h.name;
              renderGallery(getImagesForCombo());
            });
            hoodieColorsContainer.appendChild(btn);
          });
        };

        const renderSkulls = () => {
          skullColorsContainer.innerHTML = '';
          skullBlock.style.display = 'block';
          skullName.textContent = data.skullOptions[activeSkull] ? data.skullOptions[activeSkull].name : 'N/A';
          data.skullOptions.forEach((s, i) => {
            const btn = document.createElement('button');
            btn.title = s.name;
            btn.className = `w-8 h-8 ${s.color || 'bg-white'} border-2 border-transparent hover:border-white transition`;
            if (i === activeSkull) btn.classList.add('border-white');
            btn.addEventListener('click', () => {
              activeSkull = i;
              activeHoodie = 0;
              skullColorsContainer.querySelectorAll('button').forEach(b => b.classList.remove('border-white'));
              btn.classList.add('border-white');
              skullName.textContent = s.name;
              renderHoodies();
              renderGallery(getImagesForCombo());
            });
            skullColorsContainer.appendChild(btn);
          });
        };

        renderSkulls();
        renderHoodies();
        renderGallery(getImagesForCombo());
      } else if (data.hoodieColors && data.hoodieColors.length) {
        let activeHoodie = 0;
        hoodieBlock.style.display = 'block';
        skullBlock.style.display = 'none';

        const getImagesForCombo = () => {
          const hoodie = data.hoodieColors[activeHoodie] || {};
          const skulls = hoodie.skulls || [];
          const skull = skulls[0];
          if (skull && Array.isArray(skull.images) && skull.images.length) return skull.images;
          if (skull && skull.image) return [skull.image];
          if (Array.isArray(hoodie.images) && hoodie.images.length) return hoodie.images;
          if (hoodie.image) return [hoodie.image];
          return fallbackImages;
        };

        const renderHoodies = () => {
          hoodieColorsContainer.innerHTML = '';
          data.hoodieColors.forEach((h, i) => {
            const btn = document.createElement('button');
            btn.title = h.name;
            btn.className = `w-8 h-8 ${h.color || 'bg-white'} border-2 border-transparent hover:border-white transition`;
            if (i === activeHoodie) btn.classList.add('border-white');
            btn.addEventListener('click', () => {
              activeHoodie = i;
              hoodieColorsContainer.querySelectorAll('button').forEach(b => b.classList.remove('border-white'));
              btn.classList.add('border-white');
              hoodieName.textContent = h.name;
              renderGallery(getImagesForCombo());
            });
            hoodieColorsContainer.appendChild(btn);
          });
        };

        hoodieName.textContent = data.hoodieColors[0].name;
        renderHoodies();
        renderGallery(getImagesForCombo());
      } else if (data.colors && data.colors.length) {
        hoodieName.textContent = data.colors[0].name;
        skullBlock.style.display = 'none';
        renderGallery(getImagesForColor(data.colors[0]));

        data.colors.forEach((c, i) => {
          const btn = document.createElement('button');
          btn.title = c.name;
          btn.className = `w-8 h-8 ${c.color} border-2 border-transparent hover:border-white transition`;
          if (i === 0) btn.classList.add('border-white');
          btn.addEventListener('click', () => { 
            hoodieName.textContent = c.name; 
            hoodieColorsContainer.querySelectorAll('button').forEach(b => b.classList.remove('border-white'));
            btn.classList.add('border-white');
            renderGallery(getImagesForColor(c));
          });
          hoodieColorsContainer.appendChild(btn);
        });
      } else {
        hoodieName.textContent = 'N/A';
        skullBlock.style.display = 'none';
        renderGallery(fallbackImages);
      }

      // Sizes
      if (sizeBlock && sizeName && sizesContainer) {
        sizesContainer.innerHTML = '';
        const sizes = Array.isArray(data.sizes) ? data.sizes : [];
        if (sizes.length) {
          sizeBlock.style.display = 'block';
          let activeSize = 0;
          sizeName.textContent = sizes[activeSize];

          const renderSizes = () => {
            sizesContainer.innerHTML = '';
            sizes.forEach((s, i) => {
              const btn = document.createElement('button');
              btn.textContent = s;
              btn.className = 'border border-white/20 p-2 hover:bg-white/10 transition';
              if (i === activeSize) {
                btn.classList.add('bg-white', 'text-black', 'font-bold');
              }
              btn.addEventListener('click', () => {
                activeSize = i;
                sizeName.textContent = s;
                sizesContainer.querySelectorAll('button').forEach(b => b.classList.remove('bg-white','text-black','font-bold'));
                btn.classList.add('bg-white','text-black','font-bold');
              });
              sizesContainer.appendChild(btn);
            });
          };
          renderSizes();
        } else {
          sizeBlock.style.display = 'none';
          sizeName.textContent = 'OS';
        }
      }

      // Details
      detailsList.innerHTML = '';
      (data.details || []).forEach(d => {
        const li = document.createElement('li');
        li.textContent = d;
        detailsList.appendChild(li);
      });

      // Wire Add to Cart for product detail page
      const addBtn = document.getElementById('product-add-to-cart');
      if (addBtn && window.Cart && typeof Cart.add === 'function') {
        addBtn.onclick = () => {
          const priceCents = Math.round(parseFloat(String(data.price).replace(/[^0-9.]/g,'')) * 100) || 0;
          const selectedHoodieEl = hoodieColorsContainer ? hoodieColorsContainer.querySelector('button.border-white') : null;
          const selectedSkullEl = skullColorsContainer ? skullColorsContainer.querySelector('button.border-white') : null;
          const selectedSizeEl = sizesContainer ? sizesContainer.querySelector('button.bg-white') : null;
          const colorLabel = selectedHoodieEl ? (selectedHoodieEl.title || selectedHoodieEl.getAttribute('title')) : undefined;
          const skullLabel = selectedSkullEl ? (selectedSkullEl.title || selectedSkullEl.getAttribute('title')) : undefined;
          const sizeLabel = selectedSizeEl ? selectedSizeEl.textContent : undefined;
          Cart.add({
            id: data.id,
            title: data.title,
            priceCents,
            qty: 1,
            color: colorLabel,
            skull: skullLabel,
            size: sizeLabel,
            image: (mainImg && mainImg.src) || (data.images && data.images[0]) || undefined
          });
          Cart.open();
        };
      }
    }

    // 6. Lookbook Logic
    const lookbookData = {
      // Updated lookbook links to point to new products
      'lookbook-1': {
        title: 'GENKI TWO\-FACED - Split ',
        image: 'https://res.cloudinary.com/dzhvdoifb/image/upload/v1762066135/WtBAmJy_nidtmq.webp',
        caption: 'Genki Tour Hoodie',
        linkedProduct: 'genki-tour-hoodie'
      },
      'lookbook-2': {
        title: 'Genki Skull - Street Essentials',
        image: 'https://res.cloudinary.com/dzhvdoifb/image/upload/v1762748940/I0P8IHJ_oxbf46.webp',
        caption: 'In the thick of it all with the Genki Skull Hoodie.',
        linkedProduct: 'genki-skull-hoodie'
      },
      'lookbook-3': {
        title: 'Genki Sakura - Cargo Focus',
        image: 'https://res.cloudinary.com/dzhvdoifb/image/upload/v1762748935/0AA3u2l_iwzzvt.webp',
        caption: 'Sporty and utility look centered around the Genki Sport Fleece Joggers.',
        linkedProduct: 'genki-sakura-hoodie'
      },
      'lookbook-4': {
        title: 'GENKI NEW YORK - Downtown Taxicab Yellow Beanie.',
        image: 'https://res.cloudinary.com/dzhvdoifb/image/upload/v1762752906/6EiT5o1_nhvhwf.webp',
        caption: 'Cozy city vibes with the GENKI Tour Beanie.',
        linkedProduct: 'genki-tour-beanie'
      }
    };

    function renderLookbookMain() {
      const grid = document.getElementById('lookbook-main-grid');
      if (!grid) return;
      grid.innerHTML = '';

      Object.entries(lookbookData).forEach(([key, item]) => {
        const card = document.createElement('a');
        card.href = `#${key}`;
        card.className = 'group block overflow-hidden border border-white/10 hover:border-white transition';
        card.innerHTML = `
          <div class="relative overflow-hidden">
            <img src="${item.image}" alt="${item.caption || item.title}" class="w-full h-72 object-cover transition duration-300 group-hover:scale-[1.03] group-hover:brightness-110">
            <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent opacity-0 group-hover:opacity-100 transition"></div>
          </div>
          <div class="p-4 space-y-1">
            <p class="text-xs uppercase tracking-[0.3em] text-white/50">Lookbook</p>
            <h3 class="text-lg font-semibold">${item.title}</h3>
            <p class="text-sm text-gray-400 overflow-hidden">${item.caption || 'View look'}</p>
            ${item.linkedProduct ? `<span class="inline-flex items-center text-xs uppercase tracking-[0.25em] text-white/70 mt-2">Shop the fit</span>` : ''}
          </div>
        `;
        grid.appendChild(card);
      });
    }

    function renderLook(key) {
      const data = lookbookData[key];
      if (!data) return;

      const img = document.getElementById('look-main-image');
      const titleEl = document.getElementById('look-title');
      const captionEl = document.getElementById('look-caption');
      const linkedBtn = document.getElementById('look-linked-product');

      if (img) img.src = data.image;
      if (titleEl) titleEl.textContent = data.title;
      if (captionEl) captionEl.textContent = data.caption;

      if (linkedBtn) {
        if (data.linkedProduct) {
          linkedBtn.href = `#${data.linkedProduct}`;
          linkedBtn.style.display = 'inline-block';
        } else {
          linkedBtn.style.display = 'none';
        }
      }
    }
    
    // 7. Client-Side Hash Router Logic (Updated to handle header state and logo clickability)
    const pageMap = {
      '#home': 'home-page',
      '': 'home-page', 
      '#new': 'new-page',
      '#shop': 'shop-page',
      '#about': 'about-page',
      '#collabs': 'collabs-page',
      '#contact': 'contact-page',
      '#lookbook-main': 'lookbook-main-page',
      '#checkout': 'checkout-page',
      '#checkout-success': 'checkout-success-page',
      '#size-guide': 'product-page',
    };

    function updateCategoryCounts() {
      const counts = PRODUCTS.reduce((acc, p) => {
        const cats = Array.isArray(p.categories) ? p.categories : (p.categories ? [p.categories] : (p.category ? [p.category] : []));
        if (cats.length === 0) cats.push('uncategorized');
        cats.forEach(cat => {
          const key = String(cat).trim().toLowerCase();
          acc[key] = (acc[key] || 0) + 1;
        });
        acc.all = (acc.all || 0) + 1;
        return acc;
      }, {});
      document.querySelectorAll('[data-categories]').forEach(link => {
        const key = (link.dataset.categories || '').toLowerCase();
        const label = link.dataset.label || link.textContent.trim();
        const count = counts[key] || 0;
        link.textContent = `${label} (${count})`;
      });
    }

    function route() {
      const fullHash = window.location.hash || '#home';
      const hashWithoutQuery = fullHash.split('?')[0];
      const hashParts = hashWithoutQuery.split('/');
      const baseHash = hashParts[0];
      const categoriesSlug = hashParts[1];
      const urlParams = new URLSearchParams(fullHash.split('?')[1] || '');
      let pageId = pageMap[baseHash] || 'home-page';
      
      // Handle Product Detail Pages (any hash matching a product ID)
      if (PRODUCTS.some(p => `#${p.id}` === baseHash)) {
         pageId = 'product-page';
      }
      // Handle Lookbook Item Pages
      else if (baseHash.startsWith('#lookbook-') && baseHash !== '#lookbook-main') {
        pageId = 'lookbook-item-page';
      }
      // Handle Shop categories Filters
      else if (baseHash === '#shop' && categoriesSlug && categoriesSlug.startsWith('categories-')) {
        pageId = 'shop-page';
      }
      
      // Hide all pages
      document.querySelectorAll('.page-content').forEach(page => {
        page.style.display = 'none';
      });

      // Show the target page
      const targetPage = document.getElementById(pageId);
      if (targetPage) {
        targetPage.style.display = 'block';
      }
      
      // Scroll to the top when navigating
      window.scrollTo(0, 0);

      // --- Header State Logic (Updated per user request) ---
      
      if (pageId === 'home-page') {
        // On Home Page: Enable scroll effects, set initial transparency, clickability handled by updateNavbar.
        updateNavbar(window.scrollY);
        window.addEventListener('scroll', onScroll); // Ensure scroll listener is active
      } else {
        // On Other Pages: Fixed header (opaque/compacted), logo always visible, logo link always clickable.
        header.style.backgroundColor = 'rgba(0,0,0,0.9)';
        header.style.backdropFilter = 'blur(4px)';
        innerNavDiv.style.padding = '12px 1rem';
        logoContainer.style.opacity = '1';
        
        // Logo must always be clickable on fixed pages
        if (homeLink) homeLink.style.pointerEvents = 'auto'; 

        // Temporarily disable the scroll listener when not on home page
        window.removeEventListener('scroll', onScroll); 
      }

      // --- Page Specific Rendering ---

      // If this is the Shop page, apply filters and render the grid
      if (pageId === 'shop-page') {
        updateCategoryCounts();
        let filteredProducts = PRODUCTS;
        let title = "ALL PRODUCTS";
        let searchQuery = urlParams.get('q');
        const inCategory = (p, cat) => {
          const catLower = cat.toLowerCase();
          if (Array.isArray(p.categories)) {
            return p.categories.some(c => String(c).toLowerCase() === catLower);
          }
          if (p.categories) {
            return String(p.categories).toLowerCase() === catLower;
          }
          if (p.category) {
            return String(p.category).toLowerCase() === catLower;
          }
          return false;
        };

        // 1. Handle Search Query
        if (searchQuery) {
          const query = searchQuery.toLowerCase();
          const terms = query.split(/\s+/).filter(Boolean);
          filteredProducts = filteredProducts.filter(p => {
            const searchable = [
              p.title || '',
              Array.isArray(p.categories) ? p.categories.join(' ') : (p.categories || ''),
              p.category || '',
              p.keywords || '',
              Array.isArray(p.colors) ? p.colors.map(c => c.name || '').join(' ') : '',
              p.id || ''
            ].join(' ').toLowerCase();
            return terms.every(t => searchable.includes(t));
          });
          title = `SEARCH RESULTS for: "${searchQuery}"`;
          // Update the input field
          searchInput.value = searchQuery;

        } else {
          searchInput.value = ''; // Clear search bar if navigating away from search
        }
        
        // 2. Handle categories Filter (if no search query dominates)
        if (!searchQuery && categoriesSlug && (categoriesSlug.startsWith('categories-') || categoriesSlug.startsWith('category-'))) {
          const categories = categoriesSlug.replace('categories-', '').replace('category-', '');
          if (categories.toLowerCase() !== 'all') {
            filteredProducts = PRODUCTS.filter(p => inCategory(p, categories));
            title = `${categories.toUpperCase()} COLLECTION`;
          } else {
            filteredProducts = PRODUCTS;
            title = "ALL PRODUCTS";
          }
        }

        renderShopGrid(filteredProducts, title);
      }


      // If this is a product page, render the specific product
      if (pageId === 'product-page') {
        // Need to strip the hash symbol for the ID lookup
        const productKey = baseHash.replace('#', '');
        renderProduct(productKey);
      }

      if (pageId === 'lookbook-main-page') {
        renderLookbookMain();
      }

      // If this is a lookbook item page, render the specific look
      if (pageId === 'lookbook-item-page') {
        const lookKey = baseHash.replace('#', '');
        renderLook(lookKey);
      }
    }

    // Attach listeners and start initial load
    window.addEventListener('hashchange', route);
    // Note: The scroll listener is dynamically added/removed in the route function now.

   window.onload = function () {
 route();
};


   </script>
   <!-- Square Web Payments SDK -->
   <script src="https://sandbox.web.squarecdn.com/v1/square.js"></script>
</body>
</html>




























